/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/js/vast.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/Navigo/lib/navigo.min.js":
/*!***********************************************!*\
  !*** ./node_modules/Navigo/lib/navigo.min.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

!function(e,t){ true?module.exports=t():undefined}(this,function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function t(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function n(e,n,o){this.root=null,this._routes=[],this._useHash=n,this._hash=void 0===o?"#":o,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!n&&t(),this._onLocationChange=this._onLocationChange.bind(this),this._genericHooks=null,this._historyAPIUpdateMethod="pushState",e?this.root=n?e.replace(/\/$/,"/"+this._hash):e.replace(/\/$/,""):n&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}function o(e){return e instanceof RegExp?e:e.replace(/\/+$/,"").replace(/^\/+/,"^/")}function i(e){return e.replace(/\/$/,"").split("/").length}function s(e,t){return i(t)-i(e)}function r(e,t){return function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(t){var i=function(e){var t=[];return{regexp:e instanceof RegExp?e:new RegExp(e.replace(n.PARAMETER_REGEXP,function(e,o,i){return t.push(i),n.REPLACE_VARIABLE_REGEXP}).replace(n.WILDCARD_REGEXP,n.REPLACE_WILDCARD)+n.FOLLOWED_BY_SLASH_REGEXP,n.MATCH_REGEXP_FLAGS),paramNames:t}}(o(t.route)),s=i.regexp,r=i.paramNames,a=e.replace(/^\/+/,"/").match(s),h=function(e,t){return 0===t.length?null:e?e.slice(1,e.length).reduce(function(e,n,o){return null===e&&(e={}),e[t[o]]=decodeURIComponent(n),e},null):null}(a,r);return!!a&&{match:a,route:t,params:h}}).filter(function(e){return e})}(e,t)[0]||!1}function a(e,t){var n=t.map(function(t){return""===t.route||"*"===t.route?e:e.split(new RegExp(t.route+"($|/)"))[0]}),i=o(e);return n.length>1?n.reduce(function(e,t){return e.length>t.length&&(e=t),e},n[0]):1===n.length?n[0]:i}function h(e,n,o){var i,s=function(e){return e.split(/\?(.*)?$/)[0]};return void 0===o&&(o="#"),t()&&!n?s(e).split(o)[0]:(i=e.split(o)).length>1?s(i[1]):s(i[0])}function u(t,n,o){if(n&&"object"===(void 0===n?"undefined":e(n))){if(n.before)return void n.before(function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(t(),n.after&&n.after(o))},o);if(n.after)return t(),void(n.after&&n.after(o))}t()}return n.prototype={helpers:{match:r,root:a,clean:o,getOnlyURL:h},navigate:function(e,t){var n;return e=e||"",this._usePushState?(n=(n=(t?"":this._getRoot()+"/")+e.replace(/^\/+/,"/")).replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",n),this.resolve()):"undefined"!=typeof window&&(e=e.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e),this},on:function(){for(var t=this,n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];if("function"==typeof o[0])this._defaultHandler={handler:o[0],hooks:o[1]};else if(o.length>=2)if("/"===o[0]){var r=o[1];"object"===e(o[1])&&(r=o[1].uses),this._defaultHandler={handler:r,hooks:o[2]}}else this._add(o[0],o[1],o[2]);else"object"===e(o[0])&&Object.keys(o[0]).sort(s).forEach(function(e){t.on(e,o[0][e])});return this},off:function(e){return null!==this._defaultHandler&&e===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce(function(t,n){return n.handler!==e&&t.push(n),t},[]),this},notFound:function(e,t){return this._notFoundHandler={handler:e,hooks:t},this},resolve:function(e){var n,o,i=this,s=(e||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(s=s.replace(new RegExp("^/"+this._hash),"/"));var a=function(e){return e.split(/\?(.*)?$/).slice(1).join("")}(e||this._cLoc()),l=h(s,this._useHash,this._hash);return!this._paused&&(this._lastRouteResolved&&l===this._lastRouteResolved.url&&a===this._lastRouteResolved.query?(this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1):(o=r(l,this._routes))?(this._callLeave(),this._lastRouteResolved={url:l,query:a,hooks:o.route.hooks,params:o.params,name:o.route.name},n=o.route.handler,u(function(){u(function(){o.route.route instanceof RegExp?n.apply(void 0,o.match.slice(1,o.match.length)):n(o.params,a)},o.route.hooks,o.params,i._genericHooks)},this._genericHooks,o.params),o):this._defaultHandler&&(""===l||"/"===l||l===this._hash||function(e,n,o){if(t()&&!n)return!1;if(!e.match(o))return!1;var i=e.split(o);return i.length<2||""===i[1]}(l,this._useHash,this._hash))?(u(function(){u(function(){i._callLeave(),i._lastRouteResolved={url:l,query:a,hooks:i._defaultHandler.hooks},i._defaultHandler.handler(a)},i._defaultHandler.hooks)},this._genericHooks),!0):(this._notFoundHandler&&u(function(){u(function(){i._callLeave(),i._lastRouteResolved={url:l,query:a,hooks:i._notFoundHandler.hooks},i._notFoundHandler.handler(a)},i._notFoundHandler.hooks)},this._genericHooks),!1))},destroy:function(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this._listeningInterval),"undefined"!=typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var e=this;"undefined"!=typeof document&&this._findLinks().forEach(function(t){t.hasListenerAttached||(t.addEventListener("click",function(n){if((n.ctrlKey||n.metaKey)&&"a"==n.target.tagName.toLowerCase())return!1;var o=e.getLinkPath(t);e._destroyed||(n.preventDefault(),e.navigate(o.replace(/\/+$/,"").replace(/^\/+/,"/")))}),t.hasListenerAttached=!0)})},generate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._routes.reduce(function(n,o){var i;if(o.name===e)for(i in n=o.route,t)n=n.toString().replace(":"+i,t[i]);return n},"");return this._useHash?this._hash+n:n},link:function(e){return this._getRoot()+e},pause:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=e,this._historyAPIUpdateMethod=e?"replaceState":"pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(e){return void 0===e?this._historyAPIUpdateMethod:(this._historyAPIUpdateMethod=e,e)},disableIfAPINotAvailable:function(){t()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(e){return e.getAttribute("href")},hooks:function(e){this._genericHooks=e},_add:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"string"==typeof t&&(t=encodeURI(t)),this._routes.push("object"===(void 0===n?"undefined":e(n))?{route:t,handler:n.uses,name:n.as,hooks:o||n.hooks}:{route:t,handler:n,hooks:o}),this._add},_getRoot:function(){return null!==this.root?this.root:(this.root=a(this._cLoc().split("?")[0],this._routes),this.root)},_listen:function(){var e=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if("undefined"!=typeof window&&"onhashchange"in window)window.addEventListener("hashchange",this._onLocationChange);else{var t=this._cLoc(),n=void 0,o=void 0;(o=function(){n=e._cLoc(),t!==n&&(t=n,e.resolve()),e._listeningInterval=setTimeout(o,200)})()}},_cLoc:function(){return"undefined"!=typeof window?void 0!==window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:o(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var e=this._lastRouteResolved;e&&e.hooks&&e.hooks.leave&&e.hooks.leave(e.params)}},n.PARAMETER_REGEXP=/([:*])(\w+)/g,n.WILDCARD_REGEXP=/\*/g,n.REPLACE_VARIABLE_REGEXP="([^/]+)",n.REPLACE_WILDCARD="(?:.*)",n.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)",n.MATCH_REGEXP_FLAGS="",n});
//# sourceMappingURL=navigo.min.js.map


/***/ }),

/***/ "./src/js/autoplay.jsx":
/*!*****************************!*\
  !*** ./src/js/autoplay.jsx ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
class Autoplay {
	constructor({ router } = {}) {
		this.state = {};

		this.router = router;
		this.router.addEventListener('onReady', (args) => this.onRouterReady(args));
		this.router.addEventListener('onRouteChange', (args) =>
			this.onRouteChange(args)
		);
	}

	enable() {
		this.state.enabled = true;
		this.startAutoplay();
	}

	disable() {
		this.state.enabled = false;
		this.stopAutoplay();
	}

	toggle() {
		this.state.enabled ? this.disable() : this.enable();
		if (this.state.enabled) {
			this.advance();
		}
	}

	onKeyDown(e) {
		switch (e.code) {
			case 'Space':
				this.toggle();
				break;
		}
	}

	onRouterReady({ currentIndex, total, data, slideModel }) {
		const isVideo = this.getIsVideo();
		const shouldAutoplay = data && data.autoplay && data.autoplay.enabled;
		const autoplayTimeout =
			(shouldAutoplay && data && data.autoplay && data.autoplay.timeout) || 5;
		const loop = data && data.autoplay && data.autoplay.loop;
		const kiosk = data && data.autoplay && data.autoplay.kiosk;

		this.state = {
			...this.state,
			data,
			currentIndex,
			total,
			loop,
			kiosk,
			autoplayTimeout,
			slideModel,
		};

		if (!kiosk) {
			this.onKeyDown = this.onKeyDown.bind(this);
			document.removeEventListener('keydown', this.onKeyDown);
			document.addEventListener('keydown', this.onKeyDown);
		}

		if (shouldAutoplay) {
			if (!isVideo) {
				this.enable();
				this.startAutoplay();
			} else {
				this.state.enabled = true;
				this.autoplayVideo();
			}
		}
	}

	startAutoplay() {
		const { autoplayTimeout } = this.state;
		const isVideo = this.getIsVideo();

		clearInterval(this.autoplayId);

		if (!isVideo) {
			this.autoplayId = setInterval(
				() => this.advance(),
				autoplayTimeout * 1000
			);
		}
	}

	advance() {
		const { currentIndex, total, loop, slideModel } = this.state;
		const isVideo = slideModel && slideModel.type === 'video';

		if (isVideo) {
			return;
		}

		const nextIndex =
			currentIndex + 1 < total ? currentIndex + 1 : loop ? 0 : currentIndex;
		if (currentIndex !== nextIndex) {
			this.setIndex(nextIndex);
		}
	}

	stopAutoplay() {
		clearInterval(this.autoplayId);
	}

	setIndex(index) {
		this.state.currentIndex = index;

		this.router.navigate(`/slides/slide-${index + 1}`);
	}

	getIsVideo() {
		const isVideo = document.querySelectorAll('[data-type="video"]').length;

		return isVideo;
	}

	onRouteChange({ slideModel }) {
		this.state = {
			...this.state,
			slideModel,
			currentIndex: slideModel.index,
		};

		const { data } = this.state;
		const shouldAutoplay = data && data.autoplay && data.autoplay.enabled;
		if (shouldAutoplay && this.getIsVideo()) {
			this.autoplayVideo();
		}
	}

	autoplayVideo() {
		const wasEnabled = this.state.enabled;
		this.disable();

		// listen to video events
		const video = document.querySelector(`[data-type="video"]`);

		if (video) {
			const iframe = video.querySelector('iframe');
			const src = iframe && iframe.getAttribute('src');

			let provider;
			if (!src) {
				provider = 'local';
			} else if (src.indexOf('https://player.vimeo.com/video') === 0) {
				provider = 'vimeo';
			} else if (src.indexOf('https://www.youtube.com/embed/') === 0) {
				provider = 'youtube';
			}

			if (provider === 'local') {
				this.createLocalPlayer({ wasEnabled });
			} else if (provider === 'vimeo') {
				this.createVimeoPlayer({ wasEnabled });
			} else if (provider === 'youtube') {
				this.createYoutubePlayer({ wasEnabled });
			}
		}
	}

	createLocalPlayer({ wasEnabled = false } = {}) {
		const video = document.querySelector(`[data-type="video"] video`);

		if (this.state.kiosk) {
			video.removeAttribute('controls');
		}

		video.addEventListener('ended', () => {
			console.log('local video ended ', wasEnabled);
			if (wasEnabled) {
				this.enable();
				this.advance();
				this.startAutoplay();
			}
		});
	}

	createVimeoPlayer({ wasEnabled = false } = {}) {
		const video = document.querySelector(`[data-type="video"]`);
		const iframe = video.querySelector('iframe');

		let src = iframe.getAttribute('src');

		console.log('kiosk ', this.state.kiosk);

		if (this.state.kiosk) {
			src = src.indexOf('?') === -1 ? src.concat('?') : src.concat('&');
			src = src.replace('controls=1', '').concat('controls=0');
			iframe.setAttribute('src', src);
		}

		const player = new Vimeo.Player(iframe);

		// autoplay at end or after timeout
		const autoplayTimeout = video.getAttribute('data-autoplay-timeout');

		// if autoplayTimeout is a number,
		// use that value to advance
		// otherwise wait until end of video
		const autoplayTimeoutIsNumber =
			autoplayTimeout && autoplayTimeout == parseInt(autoplayTimeout, 10);

		if (autoplayTimeoutIsNumber) {
			clearInterval(this.autoplayId);
			this.autoplayId = setInterval(() => {
				this.advance();
				this.startAutoplay();
			}, autoplayTimeout * 1000);
		} else {
			// when the video has emitted its complete event
			// enable autoplay.
			player.on('ended', (data) => {
				// but only if autoplay was enabled
				console.log('vimeo ended ', wasEnabled);
				if (wasEnabled) {
					this.enable();
					this.advance();
					this.startAutoplay();
				}
			});
		}
	}

	onYTPlayerStateChange({ wasEnabled, event }) {
		console.log('yt ended ', wasEnabled);
		if (event.data === 0 && wasEnabled) {
			this.enable();
			this.advance();
			this.startAutoplay();
		}
	}

	createYoutubePlayer({ wasEnabled = false } = {}) {
		console.log('creating youtube player');

		const video = document.querySelector(`[data-type="video"]`);
		const iframe = video.querySelector('iframe');
		let src = iframe.getAttribute('src');
		if (this.state.kiosk) {
			src = src.indexOf('?') === -1 ? src.concat('?') : src.concat('&');
			src = src.replace('controls=1', '').concat('controls=0');
			iframe.setAttribute('src', src);
		}

		var tag = document.createElement('script');

		tag.src = 'https://www.youtube.com/iframe_api';
		var firstScriptTag = document.getElementsByTagName('script')[0];
		firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

		var player;

		window.onYouTubeIframeAPIReady = () => {
			player = new YT.Player('ytplayer', {
				autoplay: 1,
				events: {
					// onReady: onPlayerReady,
					onStateChange: (event) =>
						this.onYTPlayerStateChange({ wasEnabled, event }),
				},
			});
		};

		/*
		function onPlayerReady(event) {
			// event.target.playVideo();
		}
		*/

		// autoplay at end or after timeout
		const autoplayTimeout = video.getAttribute('data-autoplay-timeout');

		// if autoplayTimeout is a number,
		// use that value to advance
		// otherwise wait until end of video
		const autoplayTimeoutIsNumber =
			autoplayTimeout == parseInt(autoplayTimeout, 10);

		if (autoplayTimeoutIsNumber) {
			clearInterval(this.autoplayId);
			this.autoplayId = setInterval(() => {
				this.advance();
				this.startAutoplay();
			}, autoplayTimeout * 1000);
		} else {
			// the video is already listening
			// to it's own complete event
			// with the youtube player api
		}
	}

	clear() {
		clearInterval(this.autoplayId);
		this.container.innerHTML = '';
	}
}

/* harmony default export */ __webpack_exports__["default"] = (Autoplay);


/***/ }),

/***/ "./src/js/event-emitter.js":
/*!*********************************!*\
  !*** ./src/js/event-emitter.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

// From https://gist.github.com/mudge/5830382
var EventEmitter = /*#__PURE__*/function () {
  function EventEmitter() {
    _classCallCheck(this, EventEmitter);

    this.events = {};
  }

  _createClass(EventEmitter, [{
    key: "_getEventListByName",
    value: function _getEventListByName(eventName) {
      if (typeof this.events[eventName] === 'undefined') {
        this.events[eventName] = new Set();
      }

      return this.events[eventName];
    }
  }, {
    key: "on",
    value: function on(eventName, fn) {
      this._getEventListByName(eventName).add(fn);
    }
  }, {
    key: "once",
    value: function once(eventName, fn) {
      var self = this;

      var onceFn = function onceFn() {
        self.removeListener(eventName, onceFn);

        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        fn.apply(self, args);
      };

      this.on(eventName, onceFn);
    }
  }, {
    key: "emit",
    value: function emit(eventName) {
      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        args[_key2 - 1] = arguments[_key2];
      }

      this._getEventListByName(eventName).forEach(function (fn) {
        fn.apply(this, args);
      }.bind(this));
    }
  }, {
    key: "removeListener",
    value: function removeListener(eventName, fn) {
      this._getEventListByName(eventName)["delete"](fn);
    }
  }]);

  return EventEmitter;
}();

/* harmony default export */ __webpack_exports__["default"] = (EventEmitter);

/***/ }),

/***/ "./src/js/navigation.jsx":
/*!*******************************!*\
  !*** ./src/js/navigation.jsx ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
class Navigation {
	constructor({ router, visible = false, containerId = 'controls' } = {}) {
		this.state = { visible };

		this.container = document.getElementById(containerId)
			? document.getElementById(containerId)
			: document.createElement('div');

		this.router = router;
		this.router.addEventListener('onReady', (args) => this.onRouterReady(args));
		this.router.addEventListener('onRouteChange', (args) =>
			this.onRouteChange(args)
		);
	}

	show() {
		this.state.visible = true;
		this.render();
	}

	hide() {
		this.state.visible = false;
		this.clear();
	}

	enable() {
		this.state.enabled = true;

		document.removeEventListener('keydown', this.onKeyDown);
		document.addEventListener('keydown', this.onKeyDown);

		// window.removeEventListener('popstate', this.onPopState);
		// window.addEventListener('popstate', this.onPopState, false);
	}

	disable() {
		// window.removeEventListener('popstate', this.onPopState);
		document.removeEventListener('keydown', this.onKeyDown);

		this.state.enabled = false;
	}

	onKeyDown(e) {
		switch (e.code) {
			case 'ArrowRight':
				this.next();
				break;
			case 'ArrowLeft':
				this.prev();
				break;
		}
	}

	next() {
		const { currentIndex, total } = this.state;
		if (currentIndex + 1 < total) {
			this.setIndex(currentIndex + 1);
		}
	}

	prev() {
		const { currentIndex } = this.state;
		if (currentIndex - 1 >= 0) {
			this.setIndex(currentIndex - 1);
		}
	}

	setIndex(index) {
		this.state.currentIndex = index;

		this.router.navigate(`/slides/slide-${index + 1}`);
	}

	// onPopState(event) {
	// 	console.log('state ', history.state);
	// }

	render() {
		const { currentIndex, total, kiosk } = this.state;

		const markup = `
			<div class="top-bar-left">
				<ul class="dropdown menu">
					<li class="menu-text">Ted's Presentation</li>
				</ul>
			</div>
			${
				!kiosk
					? `<div class="top-bar-right">
				<ul class="menu">
					<li>
						<button type="button" class="button" data-action="prev">
							Prev
						</button>
					</li>
					<li><p>${currentIndex + 1} / ${total}</p></li>
					<li>
						<button type="button" class="button" data-action="next">
							Next
						</button>
					</li>
				</ul>
			</div>`
					: `<p>${currentIndex + 1} / ${total}</p>`
			}
		`;

		this.container.innerHTML = markup;

		// set up event listeners
		const prevElements = document.querySelectorAll('[data-action=prev]');
		prevElements.forEach((el) => {
			el.addEventListener('click', (e) => this.prev());
		});

		const nextElements = document.querySelectorAll('[data-action=next]');
		nextElements.forEach((el) => {
			el.addEventListener('click', (e) => this.next());
		});

		if (this.state.currentIndex === 0) {
			prevElements.forEach((el) => el.classList.add('disabled'));
		} else {
			prevElements.forEach((el) => el.classList.remove('disabled'));
		}

		if (this.state.currentIndex === this.state.total - 1) {
			nextElements.forEach((el) => el.classList.add('disabled'));
		} else {
			nextElements.forEach((el) => el.classList.remove('disabled'));
		}
	}

	onRouterReady({ currentIndex, total, data }) {
		const kiosk = data.autoplay && data.autoplay.kiosk;
		this.state = {
			...this.state,
			enabled: true,
			currentIndex,
			total,
			kiosk,
		};
		this.onKeyDown = this.onKeyDown.bind(this);
		this.enable();

		this.state.visible ? this.show() : this.hide();
	}

	onRouteChange({ slideModel }) {
		this.state = {
			...this.state,
			currentIndex: slideModel.index,
		};

		this.render();
	}

	clear() {
		this.container.innerHTML = '';
	}
}

/* harmony default export */ __webpack_exports__["default"] = (Navigation);


/***/ }),

/***/ "./src/js/router.js":
/*!**************************!*\
  !*** ./src/js/router.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var Navigo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! Navigo */ "./node_modules/Navigo/lib/navigo.min.js");
/* harmony import */ var Navigo__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(Navigo__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var JS_event_emitter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! JS/event-emitter.js */ "./src/js/event-emitter.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }




var Router = /*#__PURE__*/function () {
  function Router() {
    _classCallCheck(this, Router);

    this.state = {
      ready: false
    };
    this.router = new Navigo__WEBPACK_IMPORTED_MODULE_0___default.a(null, true);
    this.eventEmitter = new JS_event_emitter_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
  }

  _createClass(Router, [{
    key: "load",
    value: function load(json) {
      var _this = this;

      fetch(json).then(function (response) {
        return response.json();
      }).then(function (data) {
        _this.data = data;

        _this.router.on('/slides/:id', function () {
          _this.loadSlide();
        }).resolve();

        _this.router.on(function () {
          _this.loadSlide();
        }).resolve();

        _this.router.notFound(function () {
          console.log('Not found');
        });

        _this.state.ready = true;

        _this.onReady(_this.callback);
      })["catch"](function (err) {
        // There was an error
        console.warn('There was an error loading the json file.', err);
      });
    }
  }, {
    key: "getSlideModel",
    value: function getSlideModel() {
      // derive the slide from the url
      var hash = window.location.hash; // get the slide index from the hash, or default to 1

      var slideIndex = parseInt(hash.split('slide-')[1] || 1, 10); // slides are labelled 1, 2, 3, but are arrays (0, 1, 2)

      slideIndex -= 1;
      var slideModel = this.data.slides[slideIndex];
      return _objectSpread(_objectSpread({}, slideModel), {}, {
        index: slideIndex
      });
    }
  }, {
    key: "loadSlide",
    value: function loadSlide() {
      var slideModel = this.getSlideModel();

      var html = __webpack_require__("./src/slides sync recursive ^\\.\\/.*$")("./".concat(slideModel.loc));

      var presentation = document.getElementsByClassName('presentation')[0];
      var contents = document.getElementById('contents');
      contents.innerHTML = html; // set background colors

      var backgroundColorList = document.querySelectorAll('div[data-background-color]');
      presentation.style.removeProperty('background-color');

      for (var i = 0; i < backgroundColorList.length; i++) {
        var color = backgroundColorList[i].getAttribute('data-background-color');
        presentation.style.backgroundColor = color;
      } // set background images


      var backgroundList = document.querySelectorAll('div[data-background]');

      for (var _i = 0; _i < backgroundList.length; _i++) {
        var url = backgroundList[_i].getAttribute('data-background');

        backgroundList[_i].style.backgroundImage = "url('" + url + "')";
      } // perform any alignment adjustments


      var alignmentList = document.querySelectorAll('div[data-align]');
      contents.style.removeProperty('text-align');

      for (var _i2 = 0; _i2 < alignmentList.length; _i2++) {
        var alignment = alignmentList[_i2].getAttribute('data-align');

        contents.style.textAlign = alignment;
      } // perform any columnar adjustments


      var columnarList = document.querySelectorAll('div[data-column]');

      for (var _i3 = 0; _i3 < columnarList.length; _i3++) {
        var column = columnarList[_i3].getAttribute('data-column');

        columnarList[_i3].parentNode.style.border = '2px solid red';
      }
    }
  }, {
    key: "navigate",
    value: function navigate(path) {
      var _this2 = this;

      this.router.navigate(path); // use setTimeout with 0 time to summon at end of frame
      // so contents have an opportunity to render

      setTimeout(function () {
        var slideModel = _this2.getSlideModel();

        _this2.eventEmitter.emit('onRouteChange', {
          slideModel: slideModel,
          path: path
        });
      }, 0);
    }
  }, {
    key: "onReady",
    value: function onReady(callback) {
      if (this.state.ready) {
        var slideModel = this.getSlideModel();
        var index = slideModel.index;
        var total = this.data.slides.length;
        this.eventEmitter.emit('onReady', {
          currentIndex: index,
          total: total,
          data: this.data,
          slideModel: slideModel
        });
      } else {
        this.eventEmitter.add('onReady', callback);
      }
    }
  }, {
    key: "addEventListener",
    value: function addEventListener(eventName, callback) {
      this.eventEmitter.on(eventName, callback);
    }
  }]);

  return Router;
}();

/* harmony default export */ __webpack_exports__["default"] = (Router);

/***/ }),

/***/ "./src/js/vast.js":
/*!************************!*\
  !*** ./src/js/vast.js ***!
  \************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var JS_router_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! JS/router.js */ "./src/js/router.js");
/* harmony import */ var JS_navigation_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! JS/navigation.jsx */ "./src/js/navigation.jsx");
/* harmony import */ var JS_autoplay_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! JS/autoplay.jsx */ "./src/js/autoplay.jsx");


 // import Debugger from 'JS/debugger.jsx';

var isDemo = document.querySelector("[data-demo]");

if (isDemo) {
  var router = new JS_router_js__WEBPACK_IMPORTED_MODULE_0__["default"]();
  var nav = new JS_navigation_jsx__WEBPACK_IMPORTED_MODULE_1__["default"]({
    router: router,
    visible: true
  });
  var autoplayControls = new JS_autoplay_jsx__WEBPACK_IMPORTED_MODULE_2__["default"]({
    router: router
  });
  var demoUri = document.querySelector("[data-demo]").getAttribute('data-demo');
  router.load(demoUri);
}

var isDebugger = document.querySelector("[data-debug]");
console.log('isDebugger ', isDebugger);
console.log('isDebugger ', isDebugger);

if (isDebugger && isDebugger.getAttribute('data-debug') === 'true') {// const myDebugger = new Debugger(isDebugger);
}

/***/ }),

/***/ "./src/slides sync recursive ^\\.\\/.*$":
/*!**********************************!*\
  !*** ./src/slides sync ^\.\/.*$ ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./ted/slide-01-title.md": "./src/slides/ted/slide-01-title.md",
	"./ted/slide-02-background.md": "./src/slides/ted/slide-02-background.md",
	"./ted/slide-03-theme.md": "./src/slides/ted/slide-03-theme.md",
	"./ted/slide-04-copy.md": "./src/slides/ted/slide-04-copy.md",
	"./ted/slide-05-image.md": "./src/slides/ted/slide-05-image.md",
	"./ted/slide-06-columns.md": "./src/slides/ted/slide-06-columns.md",
	"./ted/slide-07-video-local.md": "./src/slides/ted/slide-07-video-local.md",
	"./ted/slide-07-video-vimeo.md": "./src/slides/ted/slide-07-video-vimeo.md",
	"./ted/slide-07-video-youtube.md": "./src/slides/ted/slide-07-video-youtube.md",
	"./ted/slide-08-3d.md": "./src/slides/ted/slide-08-3d.md",
	"./ted/slide-09-thanks.md": "./src/slides/ted/slide-09-thanks.md"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./src/slides sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./src/slides/ted/slide-01-title.md":
/*!******************************************!*\
  !*** ./src/slides/ted/slide-01-title.md ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<h1 id=\"title-slide\">Title Slide</h1>\n<p>By Ted</p>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "./src/slides/ted/slide-02-background.md":
/*!***********************************************!*\
  !*** ./src/slides/ted/slide-02-background.md ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div data-background=\"/img/adrian-infernus-GLf7bAwCdYg-unsplash.jpg\"></div>\n\n<h1 id=\"slide-2\">Slide 2</h1>\n<p>Image support</p>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "./src/slides/ted/slide-03-theme.md":
/*!******************************************!*\
  !*** ./src/slides/ted/slide-03-theme.md ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div data-background=\"/img/adrian-infernus-GLf7bAwCdYg-unsplash.jpg\"></div>\n<div data-theme=\"dark\">\n<h1>Slide 3</h1>\n<p>Theme Support</p>\n</div>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "./src/slides/ted/slide-04-copy.md":
/*!*****************************************!*\
  !*** ./src/slides/ted/slide-04-copy.md ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div data-align=\"left\">\n<p>\nCat ipsum dolor sit amet. Demand to be let outside at once. Eat all the power cords. Present belly.\n</p>\n<p>\nPurr for no reason. Pounce on unsuspecting person.\n</p>\n</div>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "./src/slides/ted/slide-05-image.md":
/*!******************************************!*\
  !*** ./src/slides/ted/slide-05-image.md ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<p><img src=\"//placekitten.com/600/600\" alt=\"Cute Kitten\"></p>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "./src/slides/ted/slide-06-columns.md":
/*!********************************************!*\
  !*** ./src/slides/ted/slide-06-columns.md ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div data-background=\"/img/adrian-infernus-GLf7bAwCdYg-unsplash.jpg\"></div>\n<div class=\"grid-x grid-padding-x\">\n  <div class=\"cell medium-6\">\n    <img class=\"contain\" src=\"//placekitten.com/600/600\" alt=\"A cute kitten\" />\n  </div>\n  <div class=\"cell medium-6 align-self-middle text-left\">\n    <div class=\"show-for-near\">\n      <p>Cat ipsum dolor sit amet. Demand to be let outside at once, and expect owner to wait for me as i think about it.</p>\n      </div>\n    <div class=\"show-for-far\">\n      <p>Cat ipsum dolor sit amet.</p>\n    </div>\n  </div>\n</div>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "./src/slides/ted/slide-07-video-local.md":
/*!************************************************!*\
  !*** ./src/slides/ted/slide-07-video-local.md ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div class=\"responsive-embed\" data-background-color=\"#000000\" data-type=\"video\" >\n<video controls autoplay muted>\n  <source src=\"/mov/totem-by-lucastswick.mp4\" type=\"video/mp4\">\n</video>\n</div>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "./src/slides/ted/slide-07-video-vimeo.md":
/*!************************************************!*\
  !*** ./src/slides/ted/slide-07-video-vimeo.md ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div class=\"responsive-embed\" data-background-color=\"#000000\" data-type=\"video\">\n  <iframe src=\"https://player.vimeo.com/video/76979871?autoplay=1\" width=\"640\" height=\"368\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen></iframe>\n</div>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "./src/slides/ted/slide-07-video-youtube.md":
/*!**************************************************!*\
  !*** ./src/slides/ted/slide-07-video-youtube.md ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div class=\"responsive-embed\" data-background-color=\"#000000\" data-type=\"video\" >\n  <iframe id=\"ytplayer\" width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/afCUPqCzOHw?autoplay=1&enablejsapi=1\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</div>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "./src/slides/ted/slide-08-3d.md":
/*!***************************************!*\
  !*** ./src/slides/ted/slide-08-3d.md ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<div class=\"responsive-embed\" data-background-color=\"#000000\" data-type=\"video\">\n\n<div class=\"sketchfab-embed-wrapper\">\n  <iframe title=\"A 3D model\" width=\"640\" height=\"480\" src=\"https://sketchfab.com/models/eede8c1394dc4132af2f02f06d497fa8/embed?autostart=1&amp;ui_controls=1&amp;ui_infos=1&amp;ui_inspector=1&amp;ui_stop=1&amp;ui_watermark=1&amp;ui_watermark_link=1\" frameborder=\"0\" allow=\"autoplay; fullscreen; vr\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"></iframe>\n  <p style=\"font-size: 13px; font-weight: normal; margin: 5px; color: #4A4A4A;\">\n      <a href=\"https://sketchfab.com/3d-models/nintendo-gameboy-1989-eede8c1394dc4132af2f02f06d497fa8?utm_medium=embed&utm_source=website&utm_campaign=share-popup\" target=\"_blank\" style=\"font-weight: bold; color: #1CAAD9;\">Nintendo Gameboy 1989</a>\n      by <a href=\"https://sketchfab.com/shrednector?utm_medium=embed&utm_source=website&utm_campaign=share-popup\" target=\"_blank\" style=\"font-weight: bold; color: #1CAAD9;\">shrednector</a>\n      on <a href=\"https://sketchfab.com?utm_medium=embed&utm_source=website&utm_campaign=share-popup\" target=\"_blank\" style=\"font-weight: bold; color: #1CAAD9;\">Sketchfab</a>\n  </p>\n</div>\n</div>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "./src/slides/ted/slide-09-thanks.md":
/*!*******************************************!*\
  !*** ./src/slides/ted/slide-09-thanks.md ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// Module
var code = "<p><span data-theme=\"dark\">\n<h1>Thank you!</h1>\n<h2>Your friend, Ted</h2>\n</span></p>\n";
// Exports
module.exports = code;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL05hdmlnby9saWIvbmF2aWdvLm1pbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvYXV0b3BsYXkuanN4Iiwid2VicGFjazovLy8uL3NyYy9qcy9ldmVudC1lbWl0dGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9uYXZpZ2F0aW9uLmpzeCIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcm91dGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy92YXN0LmpzIiwid2VicGFjazovLy8uL3NyYy9zbGlkZXMgc3luYyBeXFwuXFwvLiokIiwid2VicGFjazovLy8uL3NyYy9zbGlkZXMvdGVkL3NsaWRlLTAxLXRpdGxlLm1kIiwid2VicGFjazovLy8uL3NyYy9zbGlkZXMvdGVkL3NsaWRlLTAyLWJhY2tncm91bmQubWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NsaWRlcy90ZWQvc2xpZGUtMDMtdGhlbWUubWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NsaWRlcy90ZWQvc2xpZGUtMDQtY29weS5tZCIsIndlYnBhY2s6Ly8vLi9zcmMvc2xpZGVzL3RlZC9zbGlkZS0wNS1pbWFnZS5tZCIsIndlYnBhY2s6Ly8vLi9zcmMvc2xpZGVzL3RlZC9zbGlkZS0wNi1jb2x1bW5zLm1kIiwid2VicGFjazovLy8uL3NyYy9zbGlkZXMvdGVkL3NsaWRlLTA3LXZpZGVvLWxvY2FsLm1kIiwid2VicGFjazovLy8uL3NyYy9zbGlkZXMvdGVkL3NsaWRlLTA3LXZpZGVvLXZpbWVvLm1kIiwid2VicGFjazovLy8uL3NyYy9zbGlkZXMvdGVkL3NsaWRlLTA3LXZpZGVvLXlvdXR1YmUubWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NsaWRlcy90ZWQvc2xpZGUtMDgtM2QubWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NsaWRlcy90ZWQvc2xpZGUtMDktdGhhbmtzLm1kIl0sIm5hbWVzIjpbIkV2ZW50RW1pdHRlciIsImV2ZW50cyIsImV2ZW50TmFtZSIsIlNldCIsImZuIiwiX2dldEV2ZW50TGlzdEJ5TmFtZSIsImFkZCIsInNlbGYiLCJvbmNlRm4iLCJyZW1vdmVMaXN0ZW5lciIsImFyZ3MiLCJhcHBseSIsIm9uIiwiZm9yRWFjaCIsImJpbmQiLCJSb3V0ZXIiLCJzdGF0ZSIsInJlYWR5Iiwicm91dGVyIiwiTmF2aWdvIiwiZXZlbnRFbWl0dGVyIiwianNvbiIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsImxvYWRTbGlkZSIsInJlc29sdmUiLCJub3RGb3VuZCIsImNvbnNvbGUiLCJsb2ciLCJvblJlYWR5IiwiY2FsbGJhY2siLCJlcnIiLCJ3YXJuIiwiaGFzaCIsIndpbmRvdyIsImxvY2F0aW9uIiwic2xpZGVJbmRleCIsInBhcnNlSW50Iiwic3BsaXQiLCJzbGlkZU1vZGVsIiwic2xpZGVzIiwiaW5kZXgiLCJnZXRTbGlkZU1vZGVsIiwiaHRtbCIsInJlcXVpcmUiLCJsb2MiLCJwcmVzZW50YXRpb24iLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjb250ZW50cyIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwiYmFja2dyb3VuZENvbG9yTGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzdHlsZSIsInJlbW92ZVByb3BlcnR5IiwiaSIsImxlbmd0aCIsImNvbG9yIiwiZ2V0QXR0cmlidXRlIiwiYmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZExpc3QiLCJ1cmwiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhbGlnbm1lbnRMaXN0IiwiYWxpZ25tZW50IiwidGV4dEFsaWduIiwiY29sdW1uYXJMaXN0IiwiY29sdW1uIiwicGFyZW50Tm9kZSIsImJvcmRlciIsInBhdGgiLCJuYXZpZ2F0ZSIsInNldFRpbWVvdXQiLCJlbWl0IiwidG90YWwiLCJjdXJyZW50SW5kZXgiLCJpc0RlbW8iLCJxdWVyeVNlbGVjdG9yIiwibmF2IiwiTmF2aWdhdGlvbiIsInZpc2libGUiLCJhdXRvcGxh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Ozs7Ozs7Ozs7O0FDSEE7QUFDQSx5T0FBeU87QUFDek87QUFDQSxzQjs7Ozs7Ozs7Ozs7QUNIQTtBQUNBLCtRQUErUSxVQUFVLGlCQUFpQixpQkFBaUIsV0FBVztBQUN0VTtBQUNBLHNCOzs7Ozs7Ozs7OztBQ0hBO0FBQ0EscVNBQXFTLGtCQUFrQixlQUFlLG1CQUFtQixjQUFjLG1CQUFtQix5REFBeUQsWUFBWSx5R0FBeUcscUJBQXFCLGFBQWEsZ0JBQWdCLHVOQUF1TixnQkFBZ0IsOExBQThMLGdCQUFnQix3S0FBd0ssZ0JBQWdCO0FBQ3ZzQztBQUNBLHNCOzs7Ozs7Ozs7OztBQ0hBO0FBQ0E7QUFDQTtBQUNBLHNCIiwiZmlsZSI6InZhc3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvanMvdmFzdC5qc1wiKTtcbiIsIiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKHQpOmUuTmF2aWdvPXQoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBlPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9O2Z1bmN0aW9uIHQoKXtyZXR1cm4hKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3d8fCF3aW5kb3cuaGlzdG9yeXx8IXdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSl9ZnVuY3Rpb24gbihlLG4sbyl7dGhpcy5yb290PW51bGwsdGhpcy5fcm91dGVzPVtdLHRoaXMuX3VzZUhhc2g9bix0aGlzLl9oYXNoPXZvaWQgMD09PW8/XCIjXCI6byx0aGlzLl9wYXVzZWQ9ITEsdGhpcy5fZGVzdHJveWVkPSExLHRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkPW51bGwsdGhpcy5fbm90Rm91bmRIYW5kbGVyPW51bGwsdGhpcy5fZGVmYXVsdEhhbmRsZXI9bnVsbCx0aGlzLl91c2VQdXNoU3RhdGU9IW4mJnQoKSx0aGlzLl9vbkxvY2F0aW9uQ2hhbmdlPXRoaXMuX29uTG9jYXRpb25DaGFuZ2UuYmluZCh0aGlzKSx0aGlzLl9nZW5lcmljSG9va3M9bnVsbCx0aGlzLl9oaXN0b3J5QVBJVXBkYXRlTWV0aG9kPVwicHVzaFN0YXRlXCIsZT90aGlzLnJvb3Q9bj9lLnJlcGxhY2UoL1xcLyQvLFwiL1wiK3RoaXMuX2hhc2gpOmUucmVwbGFjZSgvXFwvJC8sXCJcIik6biYmKHRoaXMucm9vdD10aGlzLl9jTG9jKCkuc3BsaXQodGhpcy5faGFzaClbMF0ucmVwbGFjZSgvXFwvJC8sXCIvXCIrdGhpcy5faGFzaCkpLHRoaXMuX2xpc3RlbigpLHRoaXMudXBkYXRlUGFnZUxpbmtzKCl9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIFJlZ0V4cD9lOmUucmVwbGFjZSgvXFwvKyQvLFwiXCIpLnJlcGxhY2UoL15cXC8rLyxcIl4vXCIpfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIGUucmVwbGFjZSgvXFwvJC8sXCJcIikuc3BsaXQoXCIvXCIpLmxlbmd0aH1mdW5jdGlvbiBzKGUsdCl7cmV0dXJuIGkodCktaShlKX1mdW5jdGlvbiByKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybihhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06W10pLm1hcChmdW5jdGlvbih0KXt2YXIgaT1mdW5jdGlvbihlKXt2YXIgdD1bXTtyZXR1cm57cmVnZXhwOmUgaW5zdGFuY2VvZiBSZWdFeHA/ZTpuZXcgUmVnRXhwKGUucmVwbGFjZShuLlBBUkFNRVRFUl9SRUdFWFAsZnVuY3Rpb24oZSxvLGkpe3JldHVybiB0LnB1c2goaSksbi5SRVBMQUNFX1ZBUklBQkxFX1JFR0VYUH0pLnJlcGxhY2Uobi5XSUxEQ0FSRF9SRUdFWFAsbi5SRVBMQUNFX1dJTERDQVJEKStuLkZPTExPV0VEX0JZX1NMQVNIX1JFR0VYUCxuLk1BVENIX1JFR0VYUF9GTEFHUykscGFyYW1OYW1lczp0fX0obyh0LnJvdXRlKSkscz1pLnJlZ2V4cCxyPWkucGFyYW1OYW1lcyxhPWUucmVwbGFjZSgvXlxcLysvLFwiL1wiKS5tYXRjaChzKSxoPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIDA9PT10Lmxlbmd0aD9udWxsOmU/ZS5zbGljZSgxLGUubGVuZ3RoKS5yZWR1Y2UoZnVuY3Rpb24oZSxuLG8pe3JldHVybiBudWxsPT09ZSYmKGU9e30pLGVbdFtvXV09ZGVjb2RlVVJJQ29tcG9uZW50KG4pLGV9LG51bGwpOm51bGx9KGEscik7cmV0dXJuISFhJiZ7bWF0Y2g6YSxyb3V0ZTp0LHBhcmFtczpofX0pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZX0pfShlLHQpWzBdfHwhMX1mdW5jdGlvbiBhKGUsdCl7dmFyIG49dC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCJcIj09PXQucm91dGV8fFwiKlwiPT09dC5yb3V0ZT9lOmUuc3BsaXQobmV3IFJlZ0V4cCh0LnJvdXRlK1wiKCR8LylcIikpWzBdfSksaT1vKGUpO3JldHVybiBuLmxlbmd0aD4xP24ucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGVuZ3RoPnQubGVuZ3RoJiYoZT10KSxlfSxuWzBdKToxPT09bi5sZW5ndGg/blswXTppfWZ1bmN0aW9uIGgoZSxuLG8pe3ZhciBpLHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoL1xcPyguKik/JC8pWzBdfTtyZXR1cm4gdm9pZCAwPT09byYmKG89XCIjXCIpLHQoKSYmIW4/cyhlKS5zcGxpdChvKVswXTooaT1lLnNwbGl0KG8pKS5sZW5ndGg+MT9zKGlbMV0pOnMoaVswXSl9ZnVuY3Rpb24gdSh0LG4sbyl7aWYobiYmXCJvYmplY3RcIj09PSh2b2lkIDA9PT1uP1widW5kZWZpbmVkXCI6ZShuKSkpe2lmKG4uYmVmb3JlKXJldHVybiB2b2lkIG4uYmVmb3JlKGZ1bmN0aW9uKCl7KCEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF0pJiYodCgpLG4uYWZ0ZXImJm4uYWZ0ZXIobykpfSxvKTtpZihuLmFmdGVyKXJldHVybiB0KCksdm9pZChuLmFmdGVyJiZuLmFmdGVyKG8pKX10KCl9cmV0dXJuIG4ucHJvdG90eXBlPXtoZWxwZXJzOnttYXRjaDpyLHJvb3Q6YSxjbGVhbjpvLGdldE9ubHlVUkw6aH0sbmF2aWdhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gZT1lfHxcIlwiLHRoaXMuX3VzZVB1c2hTdGF0ZT8obj0obj0odD9cIlwiOnRoaXMuX2dldFJvb3QoKStcIi9cIikrZS5yZXBsYWNlKC9eXFwvKy8sXCIvXCIpKS5yZXBsYWNlKC8oW146XSkoXFwvezIsfSkvZyxcIiQxL1wiKSxoaXN0b3J5W3RoaXMuX2hpc3RvcnlBUElVcGRhdGVNZXRob2RdKHt9LFwiXCIsbiksdGhpcy5yZXNvbHZlKCkpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJihlPWUucmVwbGFjZShuZXcgUmVnRXhwKFwiXlwiK3RoaXMuX2hhc2gpLFwiXCIpLHdpbmRvdy5sb2NhdGlvbi5ocmVmPXdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMkLyxcIlwiKS5yZXBsYWNlKG5ldyBSZWdFeHAodGhpcy5faGFzaCtcIi4qJFwiKSxcIlwiKSt0aGlzLl9oYXNoK2UpLHRoaXN9LG9uOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoLG89QXJyYXkobiksaT0wO2k8bjtpKyspb1tpXT1hcmd1bWVudHNbaV07aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygb1swXSl0aGlzLl9kZWZhdWx0SGFuZGxlcj17aGFuZGxlcjpvWzBdLGhvb2tzOm9bMV19O2Vsc2UgaWYoby5sZW5ndGg+PTIpaWYoXCIvXCI9PT1vWzBdKXt2YXIgcj1vWzFdO1wib2JqZWN0XCI9PT1lKG9bMV0pJiYocj1vWzFdLnVzZXMpLHRoaXMuX2RlZmF1bHRIYW5kbGVyPXtoYW5kbGVyOnIsaG9va3M6b1syXX19ZWxzZSB0aGlzLl9hZGQob1swXSxvWzFdLG9bMl0pO2Vsc2VcIm9iamVjdFwiPT09ZShvWzBdKSYmT2JqZWN0LmtleXMob1swXSkuc29ydChzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Qub24oZSxvWzBdW2VdKX0pO3JldHVybiB0aGlzfSxvZmY6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT10aGlzLl9kZWZhdWx0SGFuZGxlciYmZT09PXRoaXMuX2RlZmF1bHRIYW5kbGVyLmhhbmRsZXI/dGhpcy5fZGVmYXVsdEhhbmRsZXI9bnVsbDpudWxsIT09dGhpcy5fbm90Rm91bmRIYW5kbGVyJiZlPT09dGhpcy5fbm90Rm91bmRIYW5kbGVyLmhhbmRsZXImJih0aGlzLl9ub3RGb3VuZEhhbmRsZXI9bnVsbCksdGhpcy5fcm91dGVzPXRoaXMuX3JvdXRlcy5yZWR1Y2UoZnVuY3Rpb24odCxuKXtyZXR1cm4gbi5oYW5kbGVyIT09ZSYmdC5wdXNoKG4pLHR9LFtdKSx0aGlzfSxub3RGb3VuZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9ub3RGb3VuZEhhbmRsZXI9e2hhbmRsZXI6ZSxob29rczp0fSx0aGlzfSxyZXNvbHZlOmZ1bmN0aW9uKGUpe3ZhciBuLG8saT10aGlzLHM9KGV8fHRoaXMuX2NMb2MoKSkucmVwbGFjZSh0aGlzLl9nZXRSb290KCksXCJcIik7dGhpcy5fdXNlSGFzaCYmKHM9cy5yZXBsYWNlKG5ldyBSZWdFeHAoXCJeL1wiK3RoaXMuX2hhc2gpLFwiL1wiKSk7dmFyIGE9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoL1xcPyguKik/JC8pLnNsaWNlKDEpLmpvaW4oXCJcIil9KGV8fHRoaXMuX2NMb2MoKSksbD1oKHMsdGhpcy5fdXNlSGFzaCx0aGlzLl9oYXNoKTtyZXR1cm4hdGhpcy5fcGF1c2VkJiYodGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQmJmw9PT10aGlzLl9sYXN0Um91dGVSZXNvbHZlZC51cmwmJmE9PT10aGlzLl9sYXN0Um91dGVSZXNvbHZlZC5xdWVyeT8odGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQuaG9va3MmJnRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkLmhvb2tzLmFscmVhZHkmJnRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkLmhvb2tzLmFscmVhZHkodGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQucGFyYW1zKSwhMSk6KG89cihsLHRoaXMuX3JvdXRlcykpPyh0aGlzLl9jYWxsTGVhdmUoKSx0aGlzLl9sYXN0Um91dGVSZXNvbHZlZD17dXJsOmwscXVlcnk6YSxob29rczpvLnJvdXRlLmhvb2tzLHBhcmFtczpvLnBhcmFtcyxuYW1lOm8ucm91dGUubmFtZX0sbj1vLnJvdXRlLmhhbmRsZXIsdShmdW5jdGlvbigpe3UoZnVuY3Rpb24oKXtvLnJvdXRlLnJvdXRlIGluc3RhbmNlb2YgUmVnRXhwP24uYXBwbHkodm9pZCAwLG8ubWF0Y2guc2xpY2UoMSxvLm1hdGNoLmxlbmd0aCkpOm4oby5wYXJhbXMsYSl9LG8ucm91dGUuaG9va3Msby5wYXJhbXMsaS5fZ2VuZXJpY0hvb2tzKX0sdGhpcy5fZ2VuZXJpY0hvb2tzLG8ucGFyYW1zKSxvKTp0aGlzLl9kZWZhdWx0SGFuZGxlciYmKFwiXCI9PT1sfHxcIi9cIj09PWx8fGw9PT10aGlzLl9oYXNofHxmdW5jdGlvbihlLG4sbyl7aWYodCgpJiYhbilyZXR1cm4hMTtpZighZS5tYXRjaChvKSlyZXR1cm4hMTt2YXIgaT1lLnNwbGl0KG8pO3JldHVybiBpLmxlbmd0aDwyfHxcIlwiPT09aVsxXX0obCx0aGlzLl91c2VIYXNoLHRoaXMuX2hhc2gpKT8odShmdW5jdGlvbigpe3UoZnVuY3Rpb24oKXtpLl9jYWxsTGVhdmUoKSxpLl9sYXN0Um91dGVSZXNvbHZlZD17dXJsOmwscXVlcnk6YSxob29rczppLl9kZWZhdWx0SGFuZGxlci5ob29rc30saS5fZGVmYXVsdEhhbmRsZXIuaGFuZGxlcihhKX0saS5fZGVmYXVsdEhhbmRsZXIuaG9va3MpfSx0aGlzLl9nZW5lcmljSG9va3MpLCEwKToodGhpcy5fbm90Rm91bmRIYW5kbGVyJiZ1KGZ1bmN0aW9uKCl7dShmdW5jdGlvbigpe2kuX2NhbGxMZWF2ZSgpLGkuX2xhc3RSb3V0ZVJlc29sdmVkPXt1cmw6bCxxdWVyeTphLGhvb2tzOmkuX25vdEZvdW5kSGFuZGxlci5ob29rc30saS5fbm90Rm91bmRIYW5kbGVyLmhhbmRsZXIoYSl9LGkuX25vdEZvdW5kSGFuZGxlci5ob29rcyl9LHRoaXMuX2dlbmVyaWNIb29rcyksITEpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3JvdXRlcz1bXSx0aGlzLl9kZXN0cm95ZWQ9ITAsdGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQ9bnVsbCx0aGlzLl9nZW5lcmljSG9va3M9bnVsbCxjbGVhclRpbWVvdXQodGhpcy5fbGlzdGVuaW5nSW50ZXJ2YWwpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsdGhpcy5fb25Mb2NhdGlvbkNoYW5nZSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsdGhpcy5fb25Mb2NhdGlvbkNoYW5nZSkpfSx1cGRhdGVQYWdlTGlua3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO1widW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmdGhpcy5fZmluZExpbmtzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0Lmhhc0xpc3RlbmVyQXR0YWNoZWR8fCh0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKG4pe2lmKChuLmN0cmxLZXl8fG4ubWV0YUtleSkmJlwiYVwiPT1uLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuITE7dmFyIG89ZS5nZXRMaW5rUGF0aCh0KTtlLl9kZXN0cm95ZWR8fChuLnByZXZlbnREZWZhdWx0KCksZS5uYXZpZ2F0ZShvLnJlcGxhY2UoL1xcLyskLyxcIlwiKS5yZXBsYWNlKC9eXFwvKy8sXCIvXCIpKSl9KSx0Lmhhc0xpc3RlbmVyQXR0YWNoZWQ9ITApfSl9LGdlbmVyYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPXRoaXMuX3JvdXRlcy5yZWR1Y2UoZnVuY3Rpb24obixvKXt2YXIgaTtpZihvLm5hbWU9PT1lKWZvcihpIGluIG49by5yb3V0ZSx0KW49bi50b1N0cmluZygpLnJlcGxhY2UoXCI6XCIraSx0W2ldKTtyZXR1cm4gbn0sXCJcIik7cmV0dXJuIHRoaXMuX3VzZUhhc2g/dGhpcy5faGFzaCtuOm59LGxpbms6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2dldFJvb3QoKStlfSxwYXVzZTpmdW5jdGlvbigpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF07dGhpcy5fcGF1c2VkPWUsdGhpcy5faGlzdG9yeUFQSVVwZGF0ZU1ldGhvZD1lP1wicmVwbGFjZVN0YXRlXCI6XCJwdXNoU3RhdGVcIn0scmVzdW1lOmZ1bmN0aW9uKCl7dGhpcy5wYXVzZSghMSl9LGhpc3RvcnlBUElVcGRhdGVNZXRob2Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/dGhpcy5faGlzdG9yeUFQSVVwZGF0ZU1ldGhvZDoodGhpcy5faGlzdG9yeUFQSVVwZGF0ZU1ldGhvZD1lLGUpfSxkaXNhYmxlSWZBUElOb3RBdmFpbGFibGU6ZnVuY3Rpb24oKXt0KCl8fHRoaXMuZGVzdHJveSgpfSxsYXN0Um91dGVSZXNvbHZlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXN0Um91dGVSZXNvbHZlZH0sZ2V0TGlua1BhdGg6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0saG9va3M6ZnVuY3Rpb24oZSl7dGhpcy5fZ2VuZXJpY0hvb2tzPWV9LF9hZGQ6ZnVuY3Rpb24odCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGwsbz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06bnVsbDtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZW5jb2RlVVJJKHQpKSx0aGlzLl9yb3V0ZXMucHVzaChcIm9iamVjdFwiPT09KHZvaWQgMD09PW4/XCJ1bmRlZmluZWRcIjplKG4pKT97cm91dGU6dCxoYW5kbGVyOm4udXNlcyxuYW1lOm4uYXMsaG9va3M6b3x8bi5ob29rc306e3JvdXRlOnQsaGFuZGxlcjpuLGhvb2tzOm99KSx0aGlzLl9hZGR9LF9nZXRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLnJvb3Q/dGhpcy5yb290Oih0aGlzLnJvb3Q9YSh0aGlzLl9jTG9jKCkuc3BsaXQoXCI/XCIpWzBdLHRoaXMuX3JvdXRlcyksdGhpcy5yb290KX0sX2xpc3RlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy5fdXNlUHVzaFN0YXRlKXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIix0aGlzLl9vbkxvY2F0aW9uQ2hhbmdlKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwib25oYXNoY2hhbmdlXCJpbiB3aW5kb3cpd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsdGhpcy5fb25Mb2NhdGlvbkNoYW5nZSk7ZWxzZXt2YXIgdD10aGlzLl9jTG9jKCksbj12b2lkIDAsbz12b2lkIDA7KG89ZnVuY3Rpb24oKXtuPWUuX2NMb2MoKSx0IT09biYmKHQ9bixlLnJlc29sdmUoKSksZS5fbGlzdGVuaW5nSW50ZXJ2YWw9c2V0VGltZW91dChvLDIwMCl9KSgpfX0sX2NMb2M6ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3ZvaWQgMCE9PXdpbmRvdy5fX05BVklHT19XSU5ET1dfTE9DQVRJT05fTU9DS19fP3dpbmRvdy5fX05BVklHT19XSU5ET1dfTE9DQVRJT05fTU9DS19fOm8od2luZG93LmxvY2F0aW9uLmhyZWYpOlwiXCJ9LF9maW5kTGlua3M6ZnVuY3Rpb24oKXtyZXR1cm5bXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1uYXZpZ29dXCIpKX0sX29uTG9jYXRpb25DaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnJlc29sdmUoKX0sX2NhbGxMZWF2ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkO2UmJmUuaG9va3MmJmUuaG9va3MubGVhdmUmJmUuaG9va3MubGVhdmUoZS5wYXJhbXMpfX0sbi5QQVJBTUVURVJfUkVHRVhQPS8oWzoqXSkoXFx3KykvZyxuLldJTERDQVJEX1JFR0VYUD0vXFwqL2csbi5SRVBMQUNFX1ZBUklBQkxFX1JFR0VYUD1cIihbXi9dKylcIixuLlJFUExBQ0VfV0lMRENBUkQ9XCIoPzouKilcIixuLkZPTExPV0VEX0JZX1NMQVNIX1JFR0VYUD1cIig/Oi8kfCQpXCIsbi5NQVRDSF9SRUdFWFBfRkxBR1M9XCJcIixufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uYXZpZ28ubWluLmpzLm1hcFxuIiwiY2xhc3MgQXV0b3BsYXkge1xuXHRjb25zdHJ1Y3Rvcih7IHJvdXRlciB9ID0ge30pIHtcblx0XHR0aGlzLnN0YXRlID0ge307XG5cblx0XHR0aGlzLnJvdXRlciA9IHJvdXRlcjtcblx0XHR0aGlzLnJvdXRlci5hZGRFdmVudExpc3RlbmVyKCdvblJlYWR5JywgKGFyZ3MpID0+IHRoaXMub25Sb3V0ZXJSZWFkeShhcmdzKSk7XG5cdFx0dGhpcy5yb3V0ZXIuYWRkRXZlbnRMaXN0ZW5lcignb25Sb3V0ZUNoYW5nZScsIChhcmdzKSA9PlxuXHRcdFx0dGhpcy5vblJvdXRlQ2hhbmdlKGFyZ3MpXG5cdFx0KTtcblx0fVxuXG5cdGVuYWJsZSgpIHtcblx0XHR0aGlzLnN0YXRlLmVuYWJsZWQgPSB0cnVlO1xuXHRcdHRoaXMuc3RhcnRBdXRvcGxheSgpO1xuXHR9XG5cblx0ZGlzYWJsZSgpIHtcblx0XHR0aGlzLnN0YXRlLmVuYWJsZWQgPSBmYWxzZTtcblx0XHR0aGlzLnN0b3BBdXRvcGxheSgpO1xuXHR9XG5cblx0dG9nZ2xlKCkge1xuXHRcdHRoaXMuc3RhdGUuZW5hYmxlZCA/IHRoaXMuZGlzYWJsZSgpIDogdGhpcy5lbmFibGUoKTtcblx0XHRpZiAodGhpcy5zdGF0ZS5lbmFibGVkKSB7XG5cdFx0XHR0aGlzLmFkdmFuY2UoKTtcblx0XHR9XG5cdH1cblxuXHRvbktleURvd24oZSkge1xuXHRcdHN3aXRjaCAoZS5jb2RlKSB7XG5cdFx0XHRjYXNlICdTcGFjZSc6XG5cdFx0XHRcdHRoaXMudG9nZ2xlKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdG9uUm91dGVyUmVhZHkoeyBjdXJyZW50SW5kZXgsIHRvdGFsLCBkYXRhLCBzbGlkZU1vZGVsIH0pIHtcblx0XHRjb25zdCBpc1ZpZGVvID0gdGhpcy5nZXRJc1ZpZGVvKCk7XG5cdFx0Y29uc3Qgc2hvdWxkQXV0b3BsYXkgPSBkYXRhICYmIGRhdGEuYXV0b3BsYXkgJiYgZGF0YS5hdXRvcGxheS5lbmFibGVkO1xuXHRcdGNvbnN0IGF1dG9wbGF5VGltZW91dCA9XG5cdFx0XHQoc2hvdWxkQXV0b3BsYXkgJiYgZGF0YSAmJiBkYXRhLmF1dG9wbGF5ICYmIGRhdGEuYXV0b3BsYXkudGltZW91dCkgfHwgNTtcblx0XHRjb25zdCBsb29wID0gZGF0YSAmJiBkYXRhLmF1dG9wbGF5ICYmIGRhdGEuYXV0b3BsYXkubG9vcDtcblx0XHRjb25zdCBraW9zayA9IGRhdGEgJiYgZGF0YS5hdXRvcGxheSAmJiBkYXRhLmF1dG9wbGF5Lmtpb3NrO1xuXG5cdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdC4uLnRoaXMuc3RhdGUsXG5cdFx0XHRkYXRhLFxuXHRcdFx0Y3VycmVudEluZGV4LFxuXHRcdFx0dG90YWwsXG5cdFx0XHRsb29wLFxuXHRcdFx0a2lvc2ssXG5cdFx0XHRhdXRvcGxheVRpbWVvdXQsXG5cdFx0XHRzbGlkZU1vZGVsLFxuXHRcdH07XG5cblx0XHRpZiAoIWtpb3NrKSB7XG5cdFx0XHR0aGlzLm9uS2V5RG93biA9IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyk7XG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24pO1xuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duKTtcblx0XHR9XG5cblx0XHRpZiAoc2hvdWxkQXV0b3BsYXkpIHtcblx0XHRcdGlmICghaXNWaWRlbykge1xuXHRcdFx0XHR0aGlzLmVuYWJsZSgpO1xuXHRcdFx0XHR0aGlzLnN0YXJ0QXV0b3BsYXkoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuc3RhdGUuZW5hYmxlZCA9IHRydWU7XG5cdFx0XHRcdHRoaXMuYXV0b3BsYXlWaWRlbygpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHN0YXJ0QXV0b3BsYXkoKSB7XG5cdFx0Y29uc3QgeyBhdXRvcGxheVRpbWVvdXQgfSA9IHRoaXMuc3RhdGU7XG5cdFx0Y29uc3QgaXNWaWRlbyA9IHRoaXMuZ2V0SXNWaWRlbygpO1xuXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9wbGF5SWQpO1xuXG5cdFx0aWYgKCFpc1ZpZGVvKSB7XG5cdFx0XHR0aGlzLmF1dG9wbGF5SWQgPSBzZXRJbnRlcnZhbChcblx0XHRcdFx0KCkgPT4gdGhpcy5hZHZhbmNlKCksXG5cdFx0XHRcdGF1dG9wbGF5VGltZW91dCAqIDEwMDBcblx0XHRcdCk7XG5cdFx0fVxuXHR9XG5cblx0YWR2YW5jZSgpIHtcblx0XHRjb25zdCB7IGN1cnJlbnRJbmRleCwgdG90YWwsIGxvb3AsIHNsaWRlTW9kZWwgfSA9IHRoaXMuc3RhdGU7XG5cdFx0Y29uc3QgaXNWaWRlbyA9IHNsaWRlTW9kZWwgJiYgc2xpZGVNb2RlbC50eXBlID09PSAndmlkZW8nO1xuXG5cdFx0aWYgKGlzVmlkZW8pIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBuZXh0SW5kZXggPVxuXHRcdFx0Y3VycmVudEluZGV4ICsgMSA8IHRvdGFsID8gY3VycmVudEluZGV4ICsgMSA6IGxvb3AgPyAwIDogY3VycmVudEluZGV4O1xuXHRcdGlmIChjdXJyZW50SW5kZXggIT09IG5leHRJbmRleCkge1xuXHRcdFx0dGhpcy5zZXRJbmRleChuZXh0SW5kZXgpO1xuXHRcdH1cblx0fVxuXG5cdHN0b3BBdXRvcGxheSgpIHtcblx0XHRjbGVhckludGVydmFsKHRoaXMuYXV0b3BsYXlJZCk7XG5cdH1cblxuXHRzZXRJbmRleChpbmRleCkge1xuXHRcdHRoaXMuc3RhdGUuY3VycmVudEluZGV4ID0gaW5kZXg7XG5cblx0XHR0aGlzLnJvdXRlci5uYXZpZ2F0ZShgL3NsaWRlcy9zbGlkZS0ke2luZGV4ICsgMX1gKTtcblx0fVxuXG5cdGdldElzVmlkZW8oKSB7XG5cdFx0Y29uc3QgaXNWaWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXR5cGU9XCJ2aWRlb1wiXScpLmxlbmd0aDtcblxuXHRcdHJldHVybiBpc1ZpZGVvO1xuXHR9XG5cblx0b25Sb3V0ZUNoYW5nZSh7IHNsaWRlTW9kZWwgfSkge1xuXHRcdHRoaXMuc3RhdGUgPSB7XG5cdFx0XHQuLi50aGlzLnN0YXRlLFxuXHRcdFx0c2xpZGVNb2RlbCxcblx0XHRcdGN1cnJlbnRJbmRleDogc2xpZGVNb2RlbC5pbmRleCxcblx0XHR9O1xuXG5cdFx0Y29uc3QgeyBkYXRhIH0gPSB0aGlzLnN0YXRlO1xuXHRcdGNvbnN0IHNob3VsZEF1dG9wbGF5ID0gZGF0YSAmJiBkYXRhLmF1dG9wbGF5ICYmIGRhdGEuYXV0b3BsYXkuZW5hYmxlZDtcblx0XHRpZiAoc2hvdWxkQXV0b3BsYXkgJiYgdGhpcy5nZXRJc1ZpZGVvKCkpIHtcblx0XHRcdHRoaXMuYXV0b3BsYXlWaWRlbygpO1xuXHRcdH1cblx0fVxuXG5cdGF1dG9wbGF5VmlkZW8oKSB7XG5cdFx0Y29uc3Qgd2FzRW5hYmxlZCA9IHRoaXMuc3RhdGUuZW5hYmxlZDtcblx0XHR0aGlzLmRpc2FibGUoKTtcblxuXHRcdC8vIGxpc3RlbiB0byB2aWRlbyBldmVudHNcblx0XHRjb25zdCB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXR5cGU9XCJ2aWRlb1wiXWApO1xuXG5cdFx0aWYgKHZpZGVvKSB7XG5cdFx0XHRjb25zdCBpZnJhbWUgPSB2aWRlby5xdWVyeVNlbGVjdG9yKCdpZnJhbWUnKTtcblx0XHRcdGNvbnN0IHNyYyA9IGlmcmFtZSAmJiBpZnJhbWUuZ2V0QXR0cmlidXRlKCdzcmMnKTtcblxuXHRcdFx0bGV0IHByb3ZpZGVyO1xuXHRcdFx0aWYgKCFzcmMpIHtcblx0XHRcdFx0cHJvdmlkZXIgPSAnbG9jYWwnO1xuXHRcdFx0fSBlbHNlIGlmIChzcmMuaW5kZXhPZignaHR0cHM6Ly9wbGF5ZXIudmltZW8uY29tL3ZpZGVvJykgPT09IDApIHtcblx0XHRcdFx0cHJvdmlkZXIgPSAndmltZW8nO1xuXHRcdFx0fSBlbHNlIGlmIChzcmMuaW5kZXhPZignaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvJykgPT09IDApIHtcblx0XHRcdFx0cHJvdmlkZXIgPSAneW91dHViZSc7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChwcm92aWRlciA9PT0gJ2xvY2FsJykge1xuXHRcdFx0XHR0aGlzLmNyZWF0ZUxvY2FsUGxheWVyKHsgd2FzRW5hYmxlZCB9KTtcblx0XHRcdH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICd2aW1lbycpIHtcblx0XHRcdFx0dGhpcy5jcmVhdGVWaW1lb1BsYXllcih7IHdhc0VuYWJsZWQgfSk7XG5cdFx0XHR9IGVsc2UgaWYgKHByb3ZpZGVyID09PSAneW91dHViZScpIHtcblx0XHRcdFx0dGhpcy5jcmVhdGVZb3V0dWJlUGxheWVyKHsgd2FzRW5hYmxlZCB9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRjcmVhdGVMb2NhbFBsYXllcih7IHdhc0VuYWJsZWQgPSBmYWxzZSB9ID0ge30pIHtcblx0XHRjb25zdCB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXR5cGU9XCJ2aWRlb1wiXSB2aWRlb2ApO1xuXG5cdFx0aWYgKHRoaXMuc3RhdGUua2lvc2spIHtcblx0XHRcdHZpZGVvLnJlbW92ZUF0dHJpYnV0ZSgnY29udHJvbHMnKTtcblx0XHR9XG5cblx0XHR2aWRlby5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsICgpID0+IHtcblx0XHRcdGNvbnNvbGUubG9nKCdsb2NhbCB2aWRlbyBlbmRlZCAnLCB3YXNFbmFibGVkKTtcblx0XHRcdGlmICh3YXNFbmFibGVkKSB7XG5cdFx0XHRcdHRoaXMuZW5hYmxlKCk7XG5cdFx0XHRcdHRoaXMuYWR2YW5jZSgpO1xuXHRcdFx0XHR0aGlzLnN0YXJ0QXV0b3BsYXkoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGNyZWF0ZVZpbWVvUGxheWVyKHsgd2FzRW5hYmxlZCA9IGZhbHNlIH0gPSB7fSkge1xuXHRcdGNvbnN0IHZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdHlwZT1cInZpZGVvXCJdYCk7XG5cdFx0Y29uc3QgaWZyYW1lID0gdmlkZW8ucXVlcnlTZWxlY3RvcignaWZyYW1lJyk7XG5cblx0XHRsZXQgc3JjID0gaWZyYW1lLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG5cblx0XHRjb25zb2xlLmxvZygna2lvc2sgJywgdGhpcy5zdGF0ZS5raW9zayk7XG5cblx0XHRpZiAodGhpcy5zdGF0ZS5raW9zaykge1xuXHRcdFx0c3JjID0gc3JjLmluZGV4T2YoJz8nKSA9PT0gLTEgPyBzcmMuY29uY2F0KCc/JykgOiBzcmMuY29uY2F0KCcmJyk7XG5cdFx0XHRzcmMgPSBzcmMucmVwbGFjZSgnY29udHJvbHM9MScsICcnKS5jb25jYXQoJ2NvbnRyb2xzPTAnKTtcblx0XHRcdGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNyYyk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcGxheWVyID0gbmV3IFZpbWVvLlBsYXllcihpZnJhbWUpO1xuXG5cdFx0Ly8gYXV0b3BsYXkgYXQgZW5kIG9yIGFmdGVyIHRpbWVvdXRcblx0XHRjb25zdCBhdXRvcGxheVRpbWVvdXQgPSB2aWRlby5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXV0b3BsYXktdGltZW91dCcpO1xuXG5cdFx0Ly8gaWYgYXV0b3BsYXlUaW1lb3V0IGlzIGEgbnVtYmVyLFxuXHRcdC8vIHVzZSB0aGF0IHZhbHVlIHRvIGFkdmFuY2Vcblx0XHQvLyBvdGhlcndpc2Ugd2FpdCB1bnRpbCBlbmQgb2YgdmlkZW9cblx0XHRjb25zdCBhdXRvcGxheVRpbWVvdXRJc051bWJlciA9XG5cdFx0XHRhdXRvcGxheVRpbWVvdXQgJiYgYXV0b3BsYXlUaW1lb3V0ID09IHBhcnNlSW50KGF1dG9wbGF5VGltZW91dCwgMTApO1xuXG5cdFx0aWYgKGF1dG9wbGF5VGltZW91dElzTnVtYmVyKSB7XG5cdFx0XHRjbGVhckludGVydmFsKHRoaXMuYXV0b3BsYXlJZCk7XG5cdFx0XHR0aGlzLmF1dG9wbGF5SWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG5cdFx0XHRcdHRoaXMuYWR2YW5jZSgpO1xuXHRcdFx0XHR0aGlzLnN0YXJ0QXV0b3BsYXkoKTtcblx0XHRcdH0sIGF1dG9wbGF5VGltZW91dCAqIDEwMDApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyB3aGVuIHRoZSB2aWRlbyBoYXMgZW1pdHRlZCBpdHMgY29tcGxldGUgZXZlbnRcblx0XHRcdC8vIGVuYWJsZSBhdXRvcGxheS5cblx0XHRcdHBsYXllci5vbignZW5kZWQnLCAoZGF0YSkgPT4ge1xuXHRcdFx0XHQvLyBidXQgb25seSBpZiBhdXRvcGxheSB3YXMgZW5hYmxlZFxuXHRcdFx0XHRjb25zb2xlLmxvZygndmltZW8gZW5kZWQgJywgd2FzRW5hYmxlZCk7XG5cdFx0XHRcdGlmICh3YXNFbmFibGVkKSB7XG5cdFx0XHRcdFx0dGhpcy5lbmFibGUoKTtcblx0XHRcdFx0XHR0aGlzLmFkdmFuY2UoKTtcblx0XHRcdFx0XHR0aGlzLnN0YXJ0QXV0b3BsYXkoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0b25ZVFBsYXllclN0YXRlQ2hhbmdlKHsgd2FzRW5hYmxlZCwgZXZlbnQgfSkge1xuXHRcdGNvbnNvbGUubG9nKCd5dCBlbmRlZCAnLCB3YXNFbmFibGVkKTtcblx0XHRpZiAoZXZlbnQuZGF0YSA9PT0gMCAmJiB3YXNFbmFibGVkKSB7XG5cdFx0XHR0aGlzLmVuYWJsZSgpO1xuXHRcdFx0dGhpcy5hZHZhbmNlKCk7XG5cdFx0XHR0aGlzLnN0YXJ0QXV0b3BsYXkoKTtcblx0XHR9XG5cdH1cblxuXHRjcmVhdGVZb3V0dWJlUGxheWVyKHsgd2FzRW5hYmxlZCA9IGZhbHNlIH0gPSB7fSkge1xuXHRcdGNvbnNvbGUubG9nKCdjcmVhdGluZyB5b3V0dWJlIHBsYXllcicpO1xuXG5cdFx0Y29uc3QgdmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10eXBlPVwidmlkZW9cIl1gKTtcblx0XHRjb25zdCBpZnJhbWUgPSB2aWRlby5xdWVyeVNlbGVjdG9yKCdpZnJhbWUnKTtcblx0XHRsZXQgc3JjID0gaWZyYW1lLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG5cdFx0aWYgKHRoaXMuc3RhdGUua2lvc2spIHtcblx0XHRcdHNyYyA9IHNyYy5pbmRleE9mKCc/JykgPT09IC0xID8gc3JjLmNvbmNhdCgnPycpIDogc3JjLmNvbmNhdCgnJicpO1xuXHRcdFx0c3JjID0gc3JjLnJlcGxhY2UoJ2NvbnRyb2xzPTEnLCAnJykuY29uY2F0KCdjb250cm9scz0wJyk7XG5cdFx0XHRpZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMpO1xuXHRcdH1cblxuXHRcdHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuXHRcdHRhZy5zcmMgPSAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vaWZyYW1lX2FwaSc7XG5cdFx0dmFyIGZpcnN0U2NyaXB0VGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuXHRcdGZpcnN0U2NyaXB0VGFnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRhZywgZmlyc3RTY3JpcHRUYWcpO1xuXG5cdFx0dmFyIHBsYXllcjtcblxuXHRcdHdpbmRvdy5vbllvdVR1YmVJZnJhbWVBUElSZWFkeSA9ICgpID0+IHtcblx0XHRcdHBsYXllciA9IG5ldyBZVC5QbGF5ZXIoJ3l0cGxheWVyJywge1xuXHRcdFx0XHRhdXRvcGxheTogMSxcblx0XHRcdFx0ZXZlbnRzOiB7XG5cdFx0XHRcdFx0Ly8gb25SZWFkeTogb25QbGF5ZXJSZWFkeSxcblx0XHRcdFx0XHRvblN0YXRlQ2hhbmdlOiAoZXZlbnQpID0+XG5cdFx0XHRcdFx0XHR0aGlzLm9uWVRQbGF5ZXJTdGF0ZUNoYW5nZSh7IHdhc0VuYWJsZWQsIGV2ZW50IH0pLFxuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdC8qXG5cdFx0ZnVuY3Rpb24gb25QbGF5ZXJSZWFkeShldmVudCkge1xuXHRcdFx0Ly8gZXZlbnQudGFyZ2V0LnBsYXlWaWRlbygpO1xuXHRcdH1cblx0XHQqL1xuXG5cdFx0Ly8gYXV0b3BsYXkgYXQgZW5kIG9yIGFmdGVyIHRpbWVvdXRcblx0XHRjb25zdCBhdXRvcGxheVRpbWVvdXQgPSB2aWRlby5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXV0b3BsYXktdGltZW91dCcpO1xuXG5cdFx0Ly8gaWYgYXV0b3BsYXlUaW1lb3V0IGlzIGEgbnVtYmVyLFxuXHRcdC8vIHVzZSB0aGF0IHZhbHVlIHRvIGFkdmFuY2Vcblx0XHQvLyBvdGhlcndpc2Ugd2FpdCB1bnRpbCBlbmQgb2YgdmlkZW9cblx0XHRjb25zdCBhdXRvcGxheVRpbWVvdXRJc051bWJlciA9XG5cdFx0XHRhdXRvcGxheVRpbWVvdXQgPT0gcGFyc2VJbnQoYXV0b3BsYXlUaW1lb3V0LCAxMCk7XG5cblx0XHRpZiAoYXV0b3BsYXlUaW1lb3V0SXNOdW1iZXIpIHtcblx0XHRcdGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvcGxheUlkKTtcblx0XHRcdHRoaXMuYXV0b3BsYXlJZCA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHRcdFx0dGhpcy5hZHZhbmNlKCk7XG5cdFx0XHRcdHRoaXMuc3RhcnRBdXRvcGxheSgpO1xuXHRcdFx0fSwgYXV0b3BsYXlUaW1lb3V0ICogMTAwMCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHRoZSB2aWRlbyBpcyBhbHJlYWR5IGxpc3RlbmluZ1xuXHRcdFx0Ly8gdG8gaXQncyBvd24gY29tcGxldGUgZXZlbnRcblx0XHRcdC8vIHdpdGggdGhlIHlvdXR1YmUgcGxheWVyIGFwaVxuXHRcdH1cblx0fVxuXG5cdGNsZWFyKCkge1xuXHRcdGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvcGxheUlkKTtcblx0XHR0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBBdXRvcGxheTtcbiIsIi8vIEZyb20gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vbXVkZ2UvNTgzMDM4MlxuXG5jbGFzcyBFdmVudEVtaXR0ZXIge1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLmV2ZW50cyA9IHt9O1xuXHR9XG5cblx0X2dldEV2ZW50TGlzdEJ5TmFtZShldmVudE5hbWUpIHtcblx0XHRpZiAodHlwZW9mIHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHR0aGlzLmV2ZW50c1tldmVudE5hbWVdID0gbmV3IFNldCgpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5ldmVudHNbZXZlbnROYW1lXTtcblx0fVxuXG5cdG9uKGV2ZW50TmFtZSwgZm4pIHtcblx0XHR0aGlzLl9nZXRFdmVudExpc3RCeU5hbWUoZXZlbnROYW1lKS5hZGQoZm4pO1xuXHR9XG5cblx0b25jZShldmVudE5hbWUsIGZuKSB7XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0XHRjb25zdCBvbmNlRm4gPSBmdW5jdGlvbiguLi5hcmdzKSB7XG5cdFx0XHRzZWxmLnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgb25jZUZuKTtcblx0XHRcdGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHRcdH07XG5cdFx0dGhpcy5vbihldmVudE5hbWUsIG9uY2VGbik7XG5cdH1cblxuXHRlbWl0KGV2ZW50TmFtZSwgLi4uYXJncykge1xuXHRcdHRoaXMuX2dldEV2ZW50TGlzdEJ5TmFtZShldmVudE5hbWUpLmZvckVhY2goXG5cdFx0XHRmdW5jdGlvbihmbikge1xuXHRcdFx0XHRmbi5hcHBseSh0aGlzLCBhcmdzKTtcblx0XHRcdH0uYmluZCh0aGlzKVxuXHRcdCk7XG5cdH1cblxuXHRyZW1vdmVMaXN0ZW5lcihldmVudE5hbWUsIGZuKSB7XG5cdFx0dGhpcy5fZ2V0RXZlbnRMaXN0QnlOYW1lKGV2ZW50TmFtZSkuZGVsZXRlKGZuKTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBFdmVudEVtaXR0ZXI7XG4iLCJjbGFzcyBOYXZpZ2F0aW9uIHtcblx0Y29uc3RydWN0b3IoeyByb3V0ZXIsIHZpc2libGUgPSBmYWxzZSwgY29udGFpbmVySWQgPSAnY29udHJvbHMnIH0gPSB7fSkge1xuXHRcdHRoaXMuc3RhdGUgPSB7IHZpc2libGUgfTtcblxuXHRcdHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVySWQpXG5cdFx0XHQ/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKVxuXHRcdFx0OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuXHRcdHRoaXMucm91dGVyID0gcm91dGVyO1xuXHRcdHRoaXMucm91dGVyLmFkZEV2ZW50TGlzdGVuZXIoJ29uUmVhZHknLCAoYXJncykgPT4gdGhpcy5vblJvdXRlclJlYWR5KGFyZ3MpKTtcblx0XHR0aGlzLnJvdXRlci5hZGRFdmVudExpc3RlbmVyKCdvblJvdXRlQ2hhbmdlJywgKGFyZ3MpID0+XG5cdFx0XHR0aGlzLm9uUm91dGVDaGFuZ2UoYXJncylcblx0XHQpO1xuXHR9XG5cblx0c2hvdygpIHtcblx0XHR0aGlzLnN0YXRlLnZpc2libGUgPSB0cnVlO1xuXHRcdHRoaXMucmVuZGVyKCk7XG5cdH1cblxuXHRoaWRlKCkge1xuXHRcdHRoaXMuc3RhdGUudmlzaWJsZSA9IGZhbHNlO1xuXHRcdHRoaXMuY2xlYXIoKTtcblx0fVxuXG5cdGVuYWJsZSgpIHtcblx0XHR0aGlzLnN0YXRlLmVuYWJsZWQgPSB0cnVlO1xuXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duKTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24pO1xuXG5cdFx0Ly8gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5vblBvcFN0YXRlKTtcblx0XHQvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLm9uUG9wU3RhdGUsIGZhbHNlKTtcblx0fVxuXG5cdGRpc2FibGUoKSB7XG5cdFx0Ly8gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5vblBvcFN0YXRlKTtcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24pO1xuXG5cdFx0dGhpcy5zdGF0ZS5lbmFibGVkID0gZmFsc2U7XG5cdH1cblxuXHRvbktleURvd24oZSkge1xuXHRcdHN3aXRjaCAoZS5jb2RlKSB7XG5cdFx0XHRjYXNlICdBcnJvd1JpZ2h0Jzpcblx0XHRcdFx0dGhpcy5uZXh0KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnQXJyb3dMZWZ0Jzpcblx0XHRcdFx0dGhpcy5wcmV2KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdG5leHQoKSB7XG5cdFx0Y29uc3QgeyBjdXJyZW50SW5kZXgsIHRvdGFsIH0gPSB0aGlzLnN0YXRlO1xuXHRcdGlmIChjdXJyZW50SW5kZXggKyAxIDwgdG90YWwpIHtcblx0XHRcdHRoaXMuc2V0SW5kZXgoY3VycmVudEluZGV4ICsgMSk7XG5cdFx0fVxuXHR9XG5cblx0cHJldigpIHtcblx0XHRjb25zdCB7IGN1cnJlbnRJbmRleCB9ID0gdGhpcy5zdGF0ZTtcblx0XHRpZiAoY3VycmVudEluZGV4IC0gMSA+PSAwKSB7XG5cdFx0XHR0aGlzLnNldEluZGV4KGN1cnJlbnRJbmRleCAtIDEpO1xuXHRcdH1cblx0fVxuXG5cdHNldEluZGV4KGluZGV4KSB7XG5cdFx0dGhpcy5zdGF0ZS5jdXJyZW50SW5kZXggPSBpbmRleDtcblxuXHRcdHRoaXMucm91dGVyLm5hdmlnYXRlKGAvc2xpZGVzL3NsaWRlLSR7aW5kZXggKyAxfWApO1xuXHR9XG5cblx0Ly8gb25Qb3BTdGF0ZShldmVudCkge1xuXHQvLyBcdGNvbnNvbGUubG9nKCdzdGF0ZSAnLCBoaXN0b3J5LnN0YXRlKTtcblx0Ly8gfVxuXG5cdHJlbmRlcigpIHtcblx0XHRjb25zdCB7IGN1cnJlbnRJbmRleCwgdG90YWwsIGtpb3NrIH0gPSB0aGlzLnN0YXRlO1xuXG5cdFx0Y29uc3QgbWFya3VwID0gYFxuXHRcdFx0PGRpdiBjbGFzcz1cInRvcC1iYXItbGVmdFwiPlxuXHRcdFx0XHQ8dWwgY2xhc3M9XCJkcm9wZG93biBtZW51XCI+XG5cdFx0XHRcdFx0PGxpIGNsYXNzPVwibWVudS10ZXh0XCI+VGVkJ3MgUHJlc2VudGF0aW9uPC9saT5cblx0XHRcdFx0PC91bD5cblx0XHRcdDwvZGl2PlxuXHRcdFx0JHtcblx0XHRcdFx0IWtpb3NrXG5cdFx0XHRcdFx0PyBgPGRpdiBjbGFzcz1cInRvcC1iYXItcmlnaHRcIj5cblx0XHRcdFx0PHVsIGNsYXNzPVwibWVudVwiPlxuXHRcdFx0XHRcdDxsaT5cblx0XHRcdFx0XHRcdDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uXCIgZGF0YS1hY3Rpb249XCJwcmV2XCI+XG5cdFx0XHRcdFx0XHRcdFByZXZcblx0XHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHRcdDwvbGk+XG5cdFx0XHRcdFx0PGxpPjxwPiR7Y3VycmVudEluZGV4ICsgMX0gLyAke3RvdGFsfTwvcD48L2xpPlxuXHRcdFx0XHRcdDxsaT5cblx0XHRcdFx0XHRcdDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uXCIgZGF0YS1hY3Rpb249XCJuZXh0XCI+XG5cdFx0XHRcdFx0XHRcdE5leHRcblx0XHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHRcdDwvbGk+XG5cdFx0XHRcdDwvdWw+XG5cdFx0XHQ8L2Rpdj5gXG5cdFx0XHRcdFx0OiBgPHA+JHtjdXJyZW50SW5kZXggKyAxfSAvICR7dG90YWx9PC9wPmBcblx0XHRcdH1cblx0XHRgO1xuXG5cdFx0dGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gbWFya3VwO1xuXG5cdFx0Ly8gc2V0IHVwIGV2ZW50IGxpc3RlbmVyc1xuXHRcdGNvbnN0IHByZXZFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWFjdGlvbj1wcmV2XScpO1xuXHRcdHByZXZFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5wcmV2KCkpO1xuXHRcdH0pO1xuXG5cdFx0Y29uc3QgbmV4dEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYWN0aW9uPW5leHRdJyk7XG5cdFx0bmV4dEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLm5leHQoKSk7XG5cdFx0fSk7XG5cblx0XHRpZiAodGhpcy5zdGF0ZS5jdXJyZW50SW5kZXggPT09IDApIHtcblx0XHRcdHByZXZFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4gZWwuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHByZXZFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKSk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc3RhdGUuY3VycmVudEluZGV4ID09PSB0aGlzLnN0YXRlLnRvdGFsIC0gMSkge1xuXHRcdFx0bmV4dEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiBlbC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmV4dEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpKTtcblx0XHR9XG5cdH1cblxuXHRvblJvdXRlclJlYWR5KHsgY3VycmVudEluZGV4LCB0b3RhbCwgZGF0YSB9KSB7XG5cdFx0Y29uc3Qga2lvc2sgPSBkYXRhLmF1dG9wbGF5ICYmIGRhdGEuYXV0b3BsYXkua2lvc2s7XG5cdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdC4uLnRoaXMuc3RhdGUsXG5cdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0Y3VycmVudEluZGV4LFxuXHRcdFx0dG90YWwsXG5cdFx0XHRraW9zayxcblx0XHR9O1xuXHRcdHRoaXMub25LZXlEb3duID0gdGhpcy5vbktleURvd24uYmluZCh0aGlzKTtcblx0XHR0aGlzLmVuYWJsZSgpO1xuXG5cdFx0dGhpcy5zdGF0ZS52aXNpYmxlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTtcblx0fVxuXG5cdG9uUm91dGVDaGFuZ2UoeyBzbGlkZU1vZGVsIH0pIHtcblx0XHR0aGlzLnN0YXRlID0ge1xuXHRcdFx0Li4udGhpcy5zdGF0ZSxcblx0XHRcdGN1cnJlbnRJbmRleDogc2xpZGVNb2RlbC5pbmRleCxcblx0XHR9O1xuXG5cdFx0dGhpcy5yZW5kZXIoKTtcblx0fVxuXG5cdGNsZWFyKCkge1xuXHRcdHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5hdmlnYXRpb247XG4iLCJpbXBvcnQgTmF2aWdvIGZyb20gJ05hdmlnbyc7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ0pTL2V2ZW50LWVtaXR0ZXIuanMnO1xuXG5jbGFzcyBSb3V0ZXIge1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLnN0YXRlID0geyByZWFkeTogZmFsc2UgfTtcblx0XHR0aGlzLnJvdXRlciA9IG5ldyBOYXZpZ28obnVsbCwgdHJ1ZSk7XG5cdFx0dGhpcy5ldmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cdH1cblxuXHRsb2FkKGpzb24pIHtcblx0XHRmZXRjaChqc29uKVxuXHRcdFx0LnRoZW4oKHJlc3BvbnNlKSA9PiB7XG5cdFx0XHRcdHJldHVybiByZXNwb25zZS5qc29uKCk7XG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oKGRhdGEpID0+IHtcblx0XHRcdFx0dGhpcy5kYXRhID0gZGF0YTtcblxuXHRcdFx0XHR0aGlzLnJvdXRlclxuXHRcdFx0XHRcdC5vbignL3NsaWRlcy86aWQnLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmxvYWRTbGlkZSgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LnJlc29sdmUoKTtcblxuXHRcdFx0XHR0aGlzLnJvdXRlclxuXHRcdFx0XHRcdC5vbigoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmxvYWRTbGlkZSgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LnJlc29sdmUoKTtcblxuXHRcdFx0XHR0aGlzLnJvdXRlci5ub3RGb3VuZCgoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ05vdCBmb3VuZCcpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHR0aGlzLnN0YXRlLnJlYWR5ID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5vblJlYWR5KHRoaXMuY2FsbGJhY2spO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnIpIHtcblx0XHRcdFx0Ly8gVGhlcmUgd2FzIGFuIGVycm9yXG5cdFx0XHRcdGNvbnNvbGUud2FybignVGhlcmUgd2FzIGFuIGVycm9yIGxvYWRpbmcgdGhlIGpzb24gZmlsZS4nLCBlcnIpO1xuXHRcdFx0fSk7XG5cdH1cblxuXHRnZXRTbGlkZU1vZGVsKCkge1xuXHRcdC8vIGRlcml2ZSB0aGUgc2xpZGUgZnJvbSB0aGUgdXJsXG5cdFx0Y29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuXHRcdC8vIGdldCB0aGUgc2xpZGUgaW5kZXggZnJvbSB0aGUgaGFzaCwgb3IgZGVmYXVsdCB0byAxXG5cdFx0bGV0IHNsaWRlSW5kZXggPSBwYXJzZUludChoYXNoLnNwbGl0KCdzbGlkZS0nKVsxXSB8fCAxLCAxMCk7XG5cdFx0Ly8gc2xpZGVzIGFyZSBsYWJlbGxlZCAxLCAyLCAzLCBidXQgYXJlIGFycmF5cyAoMCwgMSwgMilcblx0XHRzbGlkZUluZGV4IC09IDE7XG5cblx0XHRjb25zdCBzbGlkZU1vZGVsID0gdGhpcy5kYXRhLnNsaWRlc1tzbGlkZUluZGV4XTtcblxuXHRcdHJldHVybiB7IC4uLnNsaWRlTW9kZWwsIGluZGV4OiBzbGlkZUluZGV4IH07XG5cdH1cblxuXHRsb2FkU2xpZGUoKSB7XG5cdFx0Y29uc3Qgc2xpZGVNb2RlbCA9IHRoaXMuZ2V0U2xpZGVNb2RlbCgpO1xuXG5cdFx0Y29uc3QgaHRtbCA9IHJlcXVpcmUoYC4uL3NsaWRlcy8ke3NsaWRlTW9kZWwubG9jfWApO1xuXHRcdGNvbnN0IHByZXNlbnRhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3ByZXNlbnRhdGlvbicpWzBdO1xuXHRcdGNvbnN0IGNvbnRlbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnRzJyk7XG5cblx0XHRjb250ZW50cy5pbm5lckhUTUwgPSBodG1sO1xuXG5cdFx0Ly8gc2V0IGJhY2tncm91bmQgY29sb3JzXG5cdFx0Y29uc3QgYmFja2dyb3VuZENvbG9yTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHQnZGl2W2RhdGEtYmFja2dyb3VuZC1jb2xvcl0nXG5cdFx0KTtcblx0XHRwcmVzZW50YXRpb24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2JhY2tncm91bmQtY29sb3InKTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYmFja2dyb3VuZENvbG9yTGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgY29sb3IgPSBiYWNrZ3JvdW5kQ29sb3JMaXN0W2ldLmdldEF0dHJpYnV0ZShcblx0XHRcdFx0J2RhdGEtYmFja2dyb3VuZC1jb2xvcidcblx0XHRcdCk7XG5cdFx0XHRwcmVzZW50YXRpb24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XG5cdFx0fVxuXG5cdFx0Ly8gc2V0IGJhY2tncm91bmQgaW1hZ2VzXG5cdFx0Y29uc3QgYmFja2dyb3VuZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbZGF0YS1iYWNrZ3JvdW5kXScpO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBiYWNrZ3JvdW5kTGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgdXJsID0gYmFja2dyb3VuZExpc3RbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLWJhY2tncm91bmQnKTtcblx0XHRcdGJhY2tncm91bmRMaXN0W2ldLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdcIiArIHVybCArIFwiJylcIjtcblx0XHR9XG5cblx0XHQvLyBwZXJmb3JtIGFueSBhbGlnbm1lbnQgYWRqdXN0bWVudHNcblx0XHR2YXIgYWxpZ25tZW50TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltkYXRhLWFsaWduXScpO1xuXHRcdGNvbnRlbnRzLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0ZXh0LWFsaWduJyk7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGFsaWdubWVudExpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGFsaWdubWVudCA9IGFsaWdubWVudExpc3RbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLWFsaWduJyk7XG5cdFx0XHRjb250ZW50cy5zdHlsZS50ZXh0QWxpZ24gPSBhbGlnbm1lbnQ7XG5cdFx0fVxuXG5cdFx0Ly8gcGVyZm9ybSBhbnkgY29sdW1uYXIgYWRqdXN0bWVudHNcblx0XHR2YXIgY29sdW1uYXJMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2W2RhdGEtY29sdW1uXScpO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjb2x1bW5hckxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGNvbHVtbiA9IGNvbHVtbmFyTGlzdFtpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sdW1uJyk7XG5cdFx0XHRjb2x1bW5hckxpc3RbaV0ucGFyZW50Tm9kZS5zdHlsZS5ib3JkZXIgPSAnMnB4IHNvbGlkIHJlZCc7XG5cdFx0fVxuXHR9XG5cblx0bmF2aWdhdGUocGF0aCkge1xuXHRcdHRoaXMucm91dGVyLm5hdmlnYXRlKHBhdGgpO1xuXG5cdFx0Ly8gdXNlIHNldFRpbWVvdXQgd2l0aCAwIHRpbWUgdG8gc3VtbW9uIGF0IGVuZCBvZiBmcmFtZVxuXHRcdC8vIHNvIGNvbnRlbnRzIGhhdmUgYW4gb3Bwb3J0dW5pdHkgdG8gcmVuZGVyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRjb25zdCBzbGlkZU1vZGVsID0gdGhpcy5nZXRTbGlkZU1vZGVsKCk7XG5cdFx0XHR0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCdvblJvdXRlQ2hhbmdlJywgeyBzbGlkZU1vZGVsLCBwYXRoIH0pO1xuXHRcdH0sIDApO1xuXHR9XG5cblx0b25SZWFkeShjYWxsYmFjaykge1xuXHRcdGlmICh0aGlzLnN0YXRlLnJlYWR5KSB7XG5cdFx0XHRjb25zdCBzbGlkZU1vZGVsID0gdGhpcy5nZXRTbGlkZU1vZGVsKCk7XG5cdFx0XHRjb25zdCB7IGluZGV4IH0gPSBzbGlkZU1vZGVsO1xuXHRcdFx0Y29uc3QgdG90YWwgPSB0aGlzLmRhdGEuc2xpZGVzLmxlbmd0aDtcblxuXHRcdFx0dGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgnb25SZWFkeScsIHtcblx0XHRcdFx0Y3VycmVudEluZGV4OiBpbmRleCxcblx0XHRcdFx0dG90YWwsXG5cdFx0XHRcdGRhdGE6IHRoaXMuZGF0YSxcblx0XHRcdFx0c2xpZGVNb2RlbCxcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmV2ZW50RW1pdHRlci5hZGQoJ29uUmVhZHknLCBjYWxsYmFjayk7XG5cdFx0fVxuXHR9XG5cblx0YWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrKSB7XG5cdFx0dGhpcy5ldmVudEVtaXR0ZXIub24oZXZlbnROYW1lLCBjYWxsYmFjayk7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUm91dGVyO1xuIiwiaW1wb3J0IFJvdXRlciBmcm9tICdKUy9yb3V0ZXIuanMnO1xuaW1wb3J0IE5hdmlnYXRpb24gZnJvbSAnSlMvbmF2aWdhdGlvbi5qc3gnO1xuaW1wb3J0IEF1dG9wbGF5Q29udHJvbHMgZnJvbSAnSlMvYXV0b3BsYXkuanN4Jztcbi8vIGltcG9ydCBEZWJ1Z2dlciBmcm9tICdKUy9kZWJ1Z2dlci5qc3gnO1xuXG5jb25zdCBpc0RlbW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1kZW1vXWApO1xuXG5pZiAoaXNEZW1vKSB7XG5cdGNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcblx0Y29uc3QgbmF2ID0gbmV3IE5hdmlnYXRpb24oeyByb3V0ZXIsIHZpc2libGU6IHRydWUgfSk7XG5cdGNvbnN0IGF1dG9wbGF5Q29udHJvbHMgPSBuZXcgQXV0b3BsYXlDb250cm9scyh7IHJvdXRlciB9KTtcblxuXHRjb25zdCBkZW1vVXJpID0gZG9jdW1lbnRcblx0XHQucXVlcnlTZWxlY3RvcihgW2RhdGEtZGVtb11gKVxuXHRcdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGVtbycpO1xuXG5cdHJvdXRlci5sb2FkKGRlbW9VcmkpO1xufVxuXG5jb25zdCBpc0RlYnVnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtZGVidWddYCk7XG5jb25zb2xlLmxvZygnaXNEZWJ1Z2dlciAnLCBpc0RlYnVnZ2VyKTtcbmNvbnNvbGUubG9nKCdpc0RlYnVnZ2VyICcsIGlzRGVidWdnZXIpO1xuaWYgKGlzRGVidWdnZXIgJiYgaXNEZWJ1Z2dlci5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGVidWcnKSA9PT0gJ3RydWUnKSB7XG5cdC8vIGNvbnN0IG15RGVidWdnZXIgPSBuZXcgRGVidWdnZXIoaXNEZWJ1Z2dlcik7XG59XG4iLCJ2YXIgbWFwID0ge1xuXHRcIi4vdGVkL3NsaWRlLTAxLXRpdGxlLm1kXCI6IFwiLi9zcmMvc2xpZGVzL3RlZC9zbGlkZS0wMS10aXRsZS5tZFwiLFxuXHRcIi4vdGVkL3NsaWRlLTAyLWJhY2tncm91bmQubWRcIjogXCIuL3NyYy9zbGlkZXMvdGVkL3NsaWRlLTAyLWJhY2tncm91bmQubWRcIixcblx0XCIuL3RlZC9zbGlkZS0wMy10aGVtZS5tZFwiOiBcIi4vc3JjL3NsaWRlcy90ZWQvc2xpZGUtMDMtdGhlbWUubWRcIixcblx0XCIuL3RlZC9zbGlkZS0wNC1jb3B5Lm1kXCI6IFwiLi9zcmMvc2xpZGVzL3RlZC9zbGlkZS0wNC1jb3B5Lm1kXCIsXG5cdFwiLi90ZWQvc2xpZGUtMDUtaW1hZ2UubWRcIjogXCIuL3NyYy9zbGlkZXMvdGVkL3NsaWRlLTA1LWltYWdlLm1kXCIsXG5cdFwiLi90ZWQvc2xpZGUtMDYtY29sdW1ucy5tZFwiOiBcIi4vc3JjL3NsaWRlcy90ZWQvc2xpZGUtMDYtY29sdW1ucy5tZFwiLFxuXHRcIi4vdGVkL3NsaWRlLTA3LXZpZGVvLWxvY2FsLm1kXCI6IFwiLi9zcmMvc2xpZGVzL3RlZC9zbGlkZS0wNy12aWRlby1sb2NhbC5tZFwiLFxuXHRcIi4vdGVkL3NsaWRlLTA3LXZpZGVvLXZpbWVvLm1kXCI6IFwiLi9zcmMvc2xpZGVzL3RlZC9zbGlkZS0wNy12aWRlby12aW1lby5tZFwiLFxuXHRcIi4vdGVkL3NsaWRlLTA3LXZpZGVvLXlvdXR1YmUubWRcIjogXCIuL3NyYy9zbGlkZXMvdGVkL3NsaWRlLTA3LXZpZGVvLXlvdXR1YmUubWRcIixcblx0XCIuL3RlZC9zbGlkZS0wOC0zZC5tZFwiOiBcIi4vc3JjL3NsaWRlcy90ZWQvc2xpZGUtMDgtM2QubWRcIixcblx0XCIuL3RlZC9zbGlkZS0wOS10aGFua3MubWRcIjogXCIuL3NyYy9zbGlkZXMvdGVkL3NsaWRlLTA5LXRoYW5rcy5tZFwiXG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gXCIuL3NyYy9zbGlkZXMgc3luYyByZWN1cnNpdmUgXlxcXFwuXFxcXC8uKiRcIjsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8aDEgaWQ9XFxcInRpdGxlLXNsaWRlXFxcIj5UaXRsZSBTbGlkZTwvaDE+XFxuPHA+QnkgVGVkPC9wPlxcblwiO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxkaXYgZGF0YS1iYWNrZ3JvdW5kPVxcXCIvaW1nL2Fkcmlhbi1pbmZlcm51cy1HTGY3YkF3Q2RZZy11bnNwbGFzaC5qcGdcXFwiPjwvZGl2PlxcblxcbjxoMSBpZD1cXFwic2xpZGUtMlxcXCI+U2xpZGUgMjwvaDE+XFxuPHA+SW1hZ2Ugc3VwcG9ydDwvcD5cXG5cIjtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gY29kZTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZGl2IGRhdGEtYmFja2dyb3VuZD1cXFwiL2ltZy9hZHJpYW4taW5mZXJudXMtR0xmN2JBd0NkWWctdW5zcGxhc2guanBnXFxcIj48L2Rpdj5cXG48ZGl2IGRhdGEtdGhlbWU9XFxcImRhcmtcXFwiPlxcbjxoMT5TbGlkZSAzPC9oMT5cXG48cD5UaGVtZSBTdXBwb3J0PC9wPlxcbjwvZGl2PlxcblwiO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxkaXYgZGF0YS1hbGlnbj1cXFwibGVmdFxcXCI+XFxuPHA+XFxuQ2F0IGlwc3VtIGRvbG9yIHNpdCBhbWV0LiBEZW1hbmQgdG8gYmUgbGV0IG91dHNpZGUgYXQgb25jZS4gRWF0IGFsbCB0aGUgcG93ZXIgY29yZHMuIFByZXNlbnQgYmVsbHkuXFxuPC9wPlxcbjxwPlxcblB1cnIgZm9yIG5vIHJlYXNvbi4gUG91bmNlIG9uIHVuc3VzcGVjdGluZyBwZXJzb24uXFxuPC9wPlxcbjwvZGl2PlxcblwiO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxwPjxpbWcgc3JjPVxcXCIvL3BsYWNla2l0dGVuLmNvbS82MDAvNjAwXFxcIiBhbHQ9XFxcIkN1dGUgS2l0dGVuXFxcIj48L3A+XFxuXCI7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGRpdiBkYXRhLWJhY2tncm91bmQ9XFxcIi9pbWcvYWRyaWFuLWluZmVybnVzLUdMZjdiQXdDZFlnLXVuc3BsYXNoLmpwZ1xcXCI+PC9kaXY+XFxuPGRpdiBjbGFzcz1cXFwiZ3JpZC14IGdyaWQtcGFkZGluZy14XFxcIj5cXG4gIDxkaXYgY2xhc3M9XFxcImNlbGwgbWVkaXVtLTZcXFwiPlxcbiAgICA8aW1nIGNsYXNzPVxcXCJjb250YWluXFxcIiBzcmM9XFxcIi8vcGxhY2VraXR0ZW4uY29tLzYwMC82MDBcXFwiIGFsdD1cXFwiQSBjdXRlIGtpdHRlblxcXCIgLz5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cXFwiY2VsbCBtZWRpdW0tNiBhbGlnbi1zZWxmLW1pZGRsZSB0ZXh0LWxlZnRcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJzaG93LWZvci1uZWFyXFxcIj5cXG4gICAgICA8cD5DYXQgaXBzdW0gZG9sb3Igc2l0IGFtZXQuIERlbWFuZCB0byBiZSBsZXQgb3V0c2lkZSBhdCBvbmNlLCBhbmQgZXhwZWN0IG93bmVyIHRvIHdhaXQgZm9yIG1lIGFzIGkgdGhpbmsgYWJvdXQgaXQuPC9wPlxcbiAgICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJzaG93LWZvci1mYXJcXFwiPlxcbiAgICAgIDxwPkNhdCBpcHN1bSBkb2xvciBzaXQgYW1ldC48L3A+XFxuICAgIDwvZGl2PlxcbiAgPC9kaXY+XFxuPC9kaXY+XFxuXCI7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGRpdiBjbGFzcz1cXFwicmVzcG9uc2l2ZS1lbWJlZFxcXCIgZGF0YS1iYWNrZ3JvdW5kLWNvbG9yPVxcXCIjMDAwMDAwXFxcIiBkYXRhLXR5cGU9XFxcInZpZGVvXFxcIiA+XFxuPHZpZGVvIGNvbnRyb2xzIGF1dG9wbGF5IG11dGVkPlxcbiAgPHNvdXJjZSBzcmM9XFxcIi9tb3YvdG90ZW0tYnktbHVjYXN0c3dpY2subXA0XFxcIiB0eXBlPVxcXCJ2aWRlby9tcDRcXFwiPlxcbjwvdmlkZW8+XFxuPC9kaXY+XFxuXCI7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGRpdiBjbGFzcz1cXFwicmVzcG9uc2l2ZS1lbWJlZFxcXCIgZGF0YS1iYWNrZ3JvdW5kLWNvbG9yPVxcXCIjMDAwMDAwXFxcIiBkYXRhLXR5cGU9XFxcInZpZGVvXFxcIj5cXG4gIDxpZnJhbWUgc3JjPVxcXCJodHRwczovL3BsYXllci52aW1lby5jb20vdmlkZW8vNzY5Nzk4NzE/YXV0b3BsYXk9MVxcXCIgd2lkdGg9XFxcIjY0MFxcXCIgaGVpZ2h0PVxcXCIzNjhcXFwiIGZyYW1lYm9yZGVyPVxcXCIwXFxcIiBhbGxvdz1cXFwiYXV0b3BsYXk7IGZ1bGxzY3JlZW5cXFwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT5cXG48L2Rpdj5cXG5cIjtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gY29kZTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZGl2IGNsYXNzPVxcXCJyZXNwb25zaXZlLWVtYmVkXFxcIiBkYXRhLWJhY2tncm91bmQtY29sb3I9XFxcIiMwMDAwMDBcXFwiIGRhdGEtdHlwZT1cXFwidmlkZW9cXFwiID5cXG4gIDxpZnJhbWUgaWQ9XFxcInl0cGxheWVyXFxcIiB3aWR0aD1cXFwiNTYwXFxcIiBoZWlnaHQ9XFxcIjMxNVxcXCIgc3JjPVxcXCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9hZkNVUHFDek9Idz9hdXRvcGxheT0xJmVuYWJsZWpzYXBpPTFcXFwiIGZyYW1lYm9yZGVyPVxcXCIwXFxcIiBhbGxvdz1cXFwiYWNjZWxlcm9tZXRlcjsgYXV0b3BsYXk7IGNsaXBib2FyZC13cml0ZTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZVxcXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPlxcbjwvZGl2PlxcblwiO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxkaXYgY2xhc3M9XFxcInJlc3BvbnNpdmUtZW1iZWRcXFwiIGRhdGEtYmFja2dyb3VuZC1jb2xvcj1cXFwiIzAwMDAwMFxcXCIgZGF0YS10eXBlPVxcXCJ2aWRlb1xcXCI+XFxuXFxuPGRpdiBjbGFzcz1cXFwic2tldGNoZmFiLWVtYmVkLXdyYXBwZXJcXFwiPlxcbiAgPGlmcmFtZSB0aXRsZT1cXFwiQSAzRCBtb2RlbFxcXCIgd2lkdGg9XFxcIjY0MFxcXCIgaGVpZ2h0PVxcXCI0ODBcXFwiIHNyYz1cXFwiaHR0cHM6Ly9za2V0Y2hmYWIuY29tL21vZGVscy9lZWRlOGMxMzk0ZGM0MTMyYWYyZjAyZjA2ZDQ5N2ZhOC9lbWJlZD9hdXRvc3RhcnQ9MSZhbXA7dWlfY29udHJvbHM9MSZhbXA7dWlfaW5mb3M9MSZhbXA7dWlfaW5zcGVjdG9yPTEmYW1wO3VpX3N0b3A9MSZhbXA7dWlfd2F0ZXJtYXJrPTEmYW1wO3VpX3dhdGVybWFya19saW5rPTFcXFwiIGZyYW1lYm9yZGVyPVxcXCIwXFxcIiBhbGxvdz1cXFwiYXV0b3BsYXk7IGZ1bGxzY3JlZW47IHZyXFxcIiBtb3phbGxvd2Z1bGxzY3JlZW49XFxcInRydWVcXFwiIHdlYmtpdGFsbG93ZnVsbHNjcmVlbj1cXFwidHJ1ZVxcXCI+PC9pZnJhbWU+XFxuICA8cCBzdHlsZT1cXFwiZm9udC1zaXplOiAxM3B4OyBmb250LXdlaWdodDogbm9ybWFsOyBtYXJnaW46IDVweDsgY29sb3I6ICM0QTRBNEE7XFxcIj5cXG4gICAgICA8YSBocmVmPVxcXCJodHRwczovL3NrZXRjaGZhYi5jb20vM2QtbW9kZWxzL25pbnRlbmRvLWdhbWVib3ktMTk4OS1lZWRlOGMxMzk0ZGM0MTMyYWYyZjAyZjA2ZDQ5N2ZhOD91dG1fbWVkaXVtPWVtYmVkJnV0bV9zb3VyY2U9d2Vic2l0ZSZ1dG1fY2FtcGFpZ249c2hhcmUtcG9wdXBcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIiBzdHlsZT1cXFwiZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMUNBQUQ5O1xcXCI+TmludGVuZG8gR2FtZWJveSAxOTg5PC9hPlxcbiAgICAgIGJ5IDxhIGhyZWY9XFxcImh0dHBzOi8vc2tldGNoZmFiLmNvbS9zaHJlZG5lY3Rvcj91dG1fbWVkaXVtPWVtYmVkJnV0bV9zb3VyY2U9d2Vic2l0ZSZ1dG1fY2FtcGFpZ249c2hhcmUtcG9wdXBcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIiBzdHlsZT1cXFwiZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMUNBQUQ5O1xcXCI+c2hyZWRuZWN0b3I8L2E+XFxuICAgICAgb24gPGEgaHJlZj1cXFwiaHR0cHM6Ly9za2V0Y2hmYWIuY29tP3V0bV9tZWRpdW09ZW1iZWQmdXRtX3NvdXJjZT13ZWJzaXRlJnV0bV9jYW1wYWlnbj1zaGFyZS1wb3B1cFxcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiIHN0eWxlPVxcXCJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICMxQ0FBRDk7XFxcIj5Ta2V0Y2hmYWI8L2E+XFxuICA8L3A+XFxuPC9kaXY+XFxuPC9kaXY+XFxuXCI7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPHA+PHNwYW4gZGF0YS10aGVtZT1cXFwiZGFya1xcXCI+XFxuPGgxPlRoYW5rIHlvdSE8L2gxPlxcbjxoMj5Zb3VyIGZyaWVuZCwgVGVkPC9oMj5cXG48L3NwYW4+PC9wPlxcblwiO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBjb2RlOyJdLCJzb3VyY2VSb290IjoiIn0=