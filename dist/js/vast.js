!function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e,n){t.exports=function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function e(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function n(t,n,o){this.root=null,this._routes=[],this._useHash=n,this._hash=void 0===o?"#":o,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!n&&e(),this._onLocationChange=this._onLocationChange.bind(this),this._genericHooks=null,this._historyAPIUpdateMethod="pushState",t?this.root=n?t.replace(/\/$/,"/"+this._hash):t.replace(/\/$/,""):n&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}function o(t){return t instanceof RegExp?t:t.replace(/\/+$/,"").replace(/^\/+/,"^/")}function a(t){return t.replace(/\/$/,"").split("/").length}function i(t,e){return a(e)-a(t)}function r(t,e){return function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(e){var a=function(t){var e=[];return{regexp:t instanceof RegExp?t:new RegExp(t.replace(n.PARAMETER_REGEXP,(function(t,o,a){return e.push(a),n.REPLACE_VARIABLE_REGEXP})).replace(n.WILDCARD_REGEXP,n.REPLACE_WILDCARD)+n.FOLLOWED_BY_SLASH_REGEXP,n.MATCH_REGEXP_FLAGS),paramNames:e}}(o(e.route)),i=a.regexp,r=a.paramNames,s=t.replace(/^\/+/,"/").match(i),l=function(t,e){return 0===e.length?null:t?t.slice(1,t.length).reduce((function(t,n,o){return null===t&&(t={}),t[e[o]]=decodeURIComponent(n),t}),null):null}(s,r);return!!s&&{match:s,route:e,params:l}})).filter((function(t){return t}))}(t,e)[0]||!1}function s(t,e){var n=e.map((function(e){return""===e.route||"*"===e.route?t:t.split(new RegExp(e.route+"($|/)"))[0]})),a=o(t);return n.length>1?n.reduce((function(t,e){return t.length>e.length&&(t=e),t}),n[0]):1===n.length?n[0]:a}function l(t,n,o){var a,i=function(t){return t.split(/\?(.*)?$/)[0]};return void 0===o&&(o="#"),e()&&!n?i(t).split(o)[0]:(a=t.split(o)).length>1?i(a[1]):i(a[0])}function d(e,n,o){if(n&&"object"===(void 0===n?"undefined":t(n))){if(n.before)return void n.before((function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e(),n.after&&n.after(o))}),o);if(n.after)return e(),void(n.after&&n.after(o))}e()}return n.prototype={helpers:{match:r,root:s,clean:o,getOnlyURL:l},navigate:function(t,e){var n;return t=t||"",this._usePushState?(n=(n=(e?"":this._getRoot()+"/")+t.replace(/^\/+/,"/")).replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",n),this.resolve()):"undefined"!=typeof window&&(t=t.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+t),this},on:function(){for(var e=this,n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];if("function"==typeof o[0])this._defaultHandler={handler:o[0],hooks:o[1]};else if(o.length>=2)if("/"===o[0]){var r=o[1];"object"===t(o[1])&&(r=o[1].uses),this._defaultHandler={handler:r,hooks:o[2]}}else this._add(o[0],o[1],o[2]);else"object"===t(o[0])&&Object.keys(o[0]).sort(i).forEach((function(t){e.on(t,o[0][t])}));return this},off:function(t){return null!==this._defaultHandler&&t===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&t===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce((function(e,n){return n.handler!==t&&e.push(n),e}),[]),this},notFound:function(t,e){return this._notFoundHandler={handler:t,hooks:e},this},resolve:function(t){var n,o,a=this,i=(t||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(i=i.replace(new RegExp("^/"+this._hash),"/"));var s=function(t){return t.split(/\?(.*)?$/).slice(1).join("")}(t||this._cLoc()),u=l(i,this._useHash,this._hash);return!this._paused&&(this._lastRouteResolved&&u===this._lastRouteResolved.url&&s===this._lastRouteResolved.query?(this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1):(o=r(u,this._routes))?(this._callLeave(),this._lastRouteResolved={url:u,query:s,hooks:o.route.hooks,params:o.params,name:o.route.name},n=o.route.handler,d((function(){d((function(){o.route.route instanceof RegExp?n.apply(void 0,o.match.slice(1,o.match.length)):n(o.params,s)}),o.route.hooks,o.params,a._genericHooks)}),this._genericHooks,o.params),o):this._defaultHandler&&(""===u||"/"===u||u===this._hash||function(t,n,o){if(e()&&!n)return!1;if(!t.match(o))return!1;var a=t.split(o);return a.length<2||""===a[1]}(u,this._useHash,this._hash))?(d((function(){d((function(){a._callLeave(),a._lastRouteResolved={url:u,query:s,hooks:a._defaultHandler.hooks},a._defaultHandler.handler(s)}),a._defaultHandler.hooks)}),this._genericHooks),!0):(this._notFoundHandler&&d((function(){d((function(){a._callLeave(),a._lastRouteResolved={url:u,query:s,hooks:a._notFoundHandler.hooks},a._notFoundHandler.handler(s)}),a._notFoundHandler.hooks)}),this._genericHooks),!1))},destroy:function(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this._listeningInterval),"undefined"!=typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var t=this;"undefined"!=typeof document&&this._findLinks().forEach((function(e){e.hasListenerAttached||(e.addEventListener("click",(function(n){if((n.ctrlKey||n.metaKey)&&"a"==n.target.tagName.toLowerCase())return!1;var o=t.getLinkPath(e);t._destroyed||(n.preventDefault(),t.navigate(o.replace(/\/+$/,"").replace(/^\/+/,"/")))})),e.hasListenerAttached=!0)}))},generate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._routes.reduce((function(n,o){var a;if(o.name===t)for(a in n=o.route,e)n=n.toString().replace(":"+a,e[a]);return n}),"");return this._useHash?this._hash+n:n},link:function(t){return this._getRoot()+t},pause:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=t,this._historyAPIUpdateMethod=t?"replaceState":"pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(t){return void 0===t?this._historyAPIUpdateMethod:(this._historyAPIUpdateMethod=t,t)},disableIfAPINotAvailable:function(){e()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(t){return t.getAttribute("href")},hooks:function(t){this._genericHooks=t},_add:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"string"==typeof e&&(e=encodeURI(e)),this._routes.push("object"===(void 0===n?"undefined":t(n))?{route:e,handler:n.uses,name:n.as,hooks:o||n.hooks}:{route:e,handler:n,hooks:o}),this._add},_getRoot:function(){return null!==this.root||(this.root=s(this._cLoc().split("?")[0],this._routes)),this.root},_listen:function(){var t=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if("undefined"!=typeof window&&"onhashchange"in window)window.addEventListener("hashchange",this._onLocationChange);else{var e=this._cLoc(),n=void 0,o=void 0;(o=function(){n=t._cLoc(),e!==n&&(e=n,t.resolve()),t._listeningInterval=setTimeout(o,200)})()}},_cLoc:function(){return"undefined"!=typeof window?void 0!==window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:o(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var t=this._lastRouteResolved;t&&t.hooks&&t.hooks.leave&&t.hooks.leave(t.params)}},n.PARAMETER_REGEXP=/([:*])(\w+)/g,n.WILDCARD_REGEXP=/\*/g,n.REPLACE_VARIABLE_REGEXP="([^/]+)",n.REPLACE_WILDCARD="(?:.*)",n.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)",n.MATCH_REGEXP_FLAGS="",n}()},function(t,e,n){var o={"./ted/slide-01-title.md":2,"./ted/slide-02-background.md":3,"./ted/slide-03-theme.md":4,"./ted/slide-04-copy.md":5,"./ted/slide-05-image.md":6,"./ted/slide-06-columns.md":7,"./ted/slide-07-video-local.md":8,"./ted/slide-07-video-vimeo.md":9,"./ted/slide-07-video-youtube.md":10,"./ted/slide-08-3d.md":11,"./ted/slide-09-thanks.md":12};function a(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=i,t.exports=a,a.id=1},function(t,e){t.exports="<h1 id=title-slide>Title Slide</h1> <p>By Ted</p> "},function(t,e){t.exports="<div data-background=/img/adrian-infernus-GLf7bAwCdYg-unsplash.jpg></div> <h1 id=slide-2>Slide 2</h1> <p>Image support</p> "},function(t,e){t.exports="<div data-background=/img/adrian-infernus-GLf7bAwCdYg-unsplash.jpg></div> <div data-theme=dark> <h1>Slide 3</h1> <p>Theme Support</p> </div> "},function(t,e){t.exports="<div data-align=left> <p> Cat ipsum dolor sit amet. Demand to be let outside at once. Eat all the power cords. Present belly. </p> <p> Purr for no reason. Pounce on unsuspecting person. </p> </div> "},function(t,e){t.exports='<p><img src=//placekitten.com/600/600 alt="Cute Kitten"></p> '},function(t,e){t.exports='<div data-background=/img/adrian-infernus-GLf7bAwCdYg-unsplash.jpg></div> <div class="grid-x grid-padding-x"> <div class="cell medium-6"> <img class=contain src=//placekitten.com/600/600 alt="A cute kitten"/> </div> <div class="cell medium-6 align-self-middle text-left"> <div class=show-for-near> <p>Cat ipsum dolor sit amet. Demand to be let outside at once, and expect owner to wait for me as i think about it.</p> </div> <div class=show-for-far> <p>Cat ipsum dolor sit amet.</p> </div> </div> </div> '},function(t,e){t.exports="<div class=responsive-embed data-background-color=#000000 data-type=video> <video controls autoplay muted> <source src=/mov/totem-by-lucastswick.mp4 type=video/mp4> </video> </div> "},function(t,e){t.exports='<div class=responsive-embed data-background-color=#000000 data-type=video> <iframe src="https://player.vimeo.com/video/76979871?autoplay=1" width=640 height=368 frameborder=0 allow="autoplay; fullscreen" allowfullscreen></iframe> </div> '},function(t,e){t.exports='<div class=responsive-embed data-background-color=#000000 data-type=video> <iframe id=ytplayer width=560 height=315 src="https://www.youtube.com/embed/afCUPqCzOHw?autoplay=1&enablejsapi=1" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> </div> '},function(t,e){t.exports='<div class=responsive-embed data-background-color=#000000 data-type=video> <div class=sketchfab-embed-wrapper> <iframe title="A 3D model" width=640 height=480 src="https://sketchfab.com/models/eede8c1394dc4132af2f02f06d497fa8/embed?autostart=1&amp;ui_controls=1&amp;ui_infos=1&amp;ui_inspector=1&amp;ui_stop=1&amp;ui_watermark=1&amp;ui_watermark_link=1" frameborder=0 allow="autoplay; fullscreen; vr" mozallowfullscreen=true webkitallowfullscreen=true></iframe> <p style=font-size:13px;font-weight:400;margin:5px;color:#4a4a4a> <a href="https://sketchfab.com/3d-models/nintendo-gameboy-1989-eede8c1394dc4132af2f02f06d497fa8?utm_medium=embed&utm_source=website&utm_campaign=share-popup" target=_blank style=font-weight:700;color:#1caad9>Nintendo Gameboy 1989</a> by <a href="https://sketchfab.com/shrednector?utm_medium=embed&utm_source=website&utm_campaign=share-popup" target=_blank style=font-weight:700;color:#1caad9>shrednector</a> on <a href="https://sketchfab.com?utm_medium=embed&utm_source=website&utm_campaign=share-popup" target=_blank style=font-weight:700;color:#1caad9>Sketchfab</a> </p> </div> </div> '},function(t,e){t.exports="<p><span data-theme=dark> <h1>Thank you!</h1> <h2>Your friend, Ted</h2> </span></p> "},function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o);function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={}}var e,n,o;return e=t,(n=[{key:"_getEventListByName",value:function(t){return void 0===this.events[t]&&(this.events[t]=new Set),this.events[t]}},{key:"on",value:function(t,e){this._getEventListByName(t).add(e)}},{key:"once",value:function(t,e){var n=this;this.on(t,(function o(){n.removeListener(t,o);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];e.apply(n,i)}))}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this._getEventListByName(t).forEach(function(t){t.apply(this,n)}.bind(this))}},{key:"removeListener",value:function(t,e){this._getEventListByName(t).delete(e)}}])&&i(e.prototype,n),o&&i(e,o),t}();function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={ready:!1},this.router=new a.a(null,!0),this.eventEmitter=new r}var e,o,i;return e=t,(o=[{key:"load",value:function(t){var e=this;fetch(t).then((function(t){return t.json()})).then((function(t){e.data=t,e.router.on("/slides/:id",(function(){e.loadSlide()})).resolve(),e.router.on((function(){e.loadSlide()})).resolve(),e.router.notFound((function(){console.log("Not found")})),e.state.ready=!0,e.onReady(e.callback)})).catch((function(t){console.warn("There was an error loading the json file.",t)}))}},{key:"getSlideModel",value:function(){var t=window.location.hash,e=parseInt(t.split("slide-")[1]||1,10);return e-=1,l(l({},this.data.slides[e]),{},{index:e})}},{key:"loadSlide",value:function(){var t=this.getSlideModel(),e=n(1)("./".concat(t.loc)),o=document.getElementsByClassName("presentation")[0],a=document.getElementById("contents");a.innerHTML=e;var i=document.querySelectorAll("div[data-background-color]");o.style.removeProperty("background-color");for(var r=0;r<i.length;r++){var s=i[r].getAttribute("data-background-color");o.style.backgroundColor=s}for(var l=document.querySelectorAll("div[data-background]"),d=0;d<l.length;d++){var u=l[d].getAttribute("data-background");l[d].style.backgroundImage="url('"+u+"')"}var c=document.querySelectorAll("div[data-align]");a.style.removeProperty("text-align");for(var h=0;h<c.length;h++){var p=c[h].getAttribute("data-align");a.style.textAlign=p}for(var f=document.querySelectorAll("div[data-column]"),v=0;v<f.length;v++)f[v].getAttribute("data-column"),f[v].parentNode.style.border="2px solid red"}},{key:"navigate",value:function(t){var e=this;this.router.navigate(t),setTimeout((function(){var n=e.getSlideModel();e.eventEmitter.emit("onRouteChange",{slideModel:n,path:t})}),0)}},{key:"onReady",value:function(t){if(this.state.ready){var e=this.getSlideModel(),n=e.index,o=this.data.slides.length;this.eventEmitter.emit("onReady",{currentIndex:n,total:o,data:this.data,slideModel:e})}else this.eventEmitter.add("onReady",t)}},{key:"addEventListener",value:function(t,e){this.eventEmitter.on(t,e)}}])&&u(e.prototype,o),i&&u(e,i),t}();var h=class{constructor({router:t,visible:e=!1,containerId:n="controls"}={}){this.state={visible:e},this.container=document.getElementById(n)?document.getElementById(n):document.createElement("div"),this.router=t,this.router.addEventListener("onReady",t=>this.onRouterReady(t)),this.router.addEventListener("onRouteChange",t=>this.onRouteChange(t))}show(){this.state.visible=!0,this.render()}hide(){this.state.visible=!1,this.clear()}enable(){this.state.enabled=!0,document.removeEventListener("keydown",this.onKeyDown),document.addEventListener("keydown",this.onKeyDown)}disable(){document.removeEventListener("keydown",this.onKeyDown),this.state.enabled=!1}onKeyDown(t){switch(t.code){case"ArrowRight":this.next();break;case"ArrowLeft":this.prev()}}next(){const{currentIndex:t,total:e}=this.state;t+1<e&&this.setIndex(t+1)}prev(){const{currentIndex:t}=this.state;t-1>=0&&this.setIndex(t-1)}setIndex(t){this.state.currentIndex=t,this.router.navigate("/slides/slide-"+(t+1))}render(){const{currentIndex:t,total:e,kiosk:n}=this.state,o=`\n\t\t\t<div class="top-bar-left">\n\t\t\t\t<ul class="dropdown menu">\n\t\t\t\t\t<li class="menu-text">Ted's Presentation</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t${n?`<p>${t+1} / ${e}</p>`:`<div class="top-bar-right">\n\t\t\t\t<ul class="menu">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<button type="button" class="button" data-action="prev">\n\t\t\t\t\t\t\tPrev\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li><p>${t+1} / ${e}</p></li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<button type="button" class="button" data-action="next">\n\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>`}\n\t\t`;this.container.innerHTML=o;const a=document.querySelectorAll("[data-action=prev]");a.forEach(t=>{t.addEventListener("click",t=>this.prev())});const i=document.querySelectorAll("[data-action=next]");i.forEach(t=>{t.addEventListener("click",t=>this.next())}),0===this.state.currentIndex?a.forEach(t=>t.classList.add("disabled")):a.forEach(t=>t.classList.remove("disabled")),this.state.currentIndex===this.state.total-1?i.forEach(t=>t.classList.add("disabled")):i.forEach(t=>t.classList.remove("disabled"))}onRouterReady({currentIndex:t,total:e,data:n}){const o=n.autoplay&&n.autoplay.kiosk;this.state={...this.state,enabled:!0,currentIndex:t,total:e,kiosk:o},this.onKeyDown=this.onKeyDown.bind(this),this.enable(),this.state.visible?this.show():this.hide()}onRouteChange({slideModel:t}){this.state={...this.state,currentIndex:t.index},this.render()}clear(){this.container.innerHTML=""}};var p=class{constructor({router:t}={}){this.state={},this.router=t,this.router.addEventListener("onReady",t=>this.onRouterReady(t)),this.router.addEventListener("onRouteChange",t=>this.onRouteChange(t))}enable(){this.state.enabled=!0,this.startAutoplay()}disable(){this.state.enabled=!1,this.stopAutoplay()}toggle(){this.state.enabled?this.disable():this.enable(),this.state.enabled&&this.advance()}onKeyDown(t){switch(t.code){case"Space":this.toggle()}}onRouterReady({currentIndex:t,total:e,data:n,slideModel:o}){const a=this.getIsVideo(),i=n&&n.autoplay&&n.autoplay.enabled,r=i&&n&&n.autoplay&&n.autoplay.timeout||5,s=n&&n.autoplay&&n.autoplay.loop,l=n&&n.autoplay&&n.autoplay.kiosk;this.state={...this.state,data:n,currentIndex:t,total:e,loop:s,kiosk:l,autoplayTimeout:r,slideModel:o},l||(this.onKeyDown=this.onKeyDown.bind(this),document.removeEventListener("keydown",this.onKeyDown),document.addEventListener("keydown",this.onKeyDown)),i&&(a?(this.state.enabled=!0,this.autoplayVideo()):(this.enable(),this.startAutoplay()))}startAutoplay(){const{autoplayTimeout:t}=this.state,e=this.getIsVideo();clearInterval(this.autoplayId),e||(this.autoplayId=setInterval(()=>this.advance(),1e3*t))}advance(){const{currentIndex:t,total:e,loop:n,slideModel:o}=this.state;if(o&&"video"===o.type)return;const a=t+1<e?t+1:n?0:t;t!==a&&this.setIndex(a)}stopAutoplay(){clearInterval(this.autoplayId)}setIndex(t){this.state.currentIndex=t,this.router.navigate("/slides/slide-"+(t+1))}getIsVideo(){return document.querySelectorAll('[data-type="video"]').length}onRouteChange({slideModel:t}){this.state={...this.state,slideModel:t,currentIndex:t.index};const{data:e}=this.state;e&&e.autoplay&&e.autoplay.enabled&&this.getIsVideo()&&this.autoplayVideo()}autoplayVideo(){const t=this.state.enabled;this.disable();const e=document.querySelector('[data-type="video"]');if(e){const n=e.querySelector("iframe"),o=n&&n.getAttribute("src");let a;o?0===o.indexOf("https://player.vimeo.com/video")?a="vimeo":0===o.indexOf("https://www.youtube.com/embed/")&&(a="youtube"):a="local","local"===a?this.createLocalPlayer({wasEnabled:t}):"vimeo"===a?this.createVimeoPlayer({wasEnabled:t}):"youtube"===a&&this.createYoutubePlayer({wasEnabled:t})}}createLocalPlayer({wasEnabled:t=!1}={}){const e=document.querySelector('[data-type="video"] video');this.state.kiosk&&e.removeAttribute("controls"),e.addEventListener("ended",()=>{console.log("local video ended ",t),t&&(this.enable(),this.advance(),this.startAutoplay())})}createVimeoPlayer({wasEnabled:t=!1}={}){const e=document.querySelector('[data-type="video"]'),n=e.querySelector("iframe");let o=n.getAttribute("src");console.log("kiosk ",this.state.kiosk),this.state.kiosk&&(o=-1===o.indexOf("?")?o.concat("?"):o.concat("&"),o=o.replace("controls=1","").concat("controls=0"),n.setAttribute("src",o));const a=new Vimeo.Player(n),i=e.getAttribute("data-autoplay-timeout");i&&i==parseInt(i,10)?(clearInterval(this.autoplayId),this.autoplayId=setInterval(()=>{this.advance(),this.startAutoplay()},1e3*i)):a.on("ended",e=>{console.log("vimeo ended ",t),t&&(this.enable(),this.advance(),this.startAutoplay())})}onYTPlayerStateChange({wasEnabled:t,event:e}){console.log("yt ended ",t),0===e.data&&t&&(this.enable(),this.advance(),this.startAutoplay())}createYoutubePlayer({wasEnabled:t=!1}={}){console.log("creating youtube player");const e=document.querySelector('[data-type="video"]'),n=e.querySelector("iframe");let o=n.getAttribute("src");this.state.kiosk&&(o=-1===o.indexOf("?")?o.concat("?"):o.concat("&"),o=o.replace("controls=1","").concat("controls=0"),n.setAttribute("src",o));var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i),window.onYouTubeIframeAPIReady=()=>{new YT.Player("ytplayer",{autoplay:1,events:{onStateChange:e=>this.onYTPlayerStateChange({wasEnabled:t,event:e})}})};const r=e.getAttribute("data-autoplay-timeout");r==parseInt(r,10)&&(clearInterval(this.autoplayId),this.autoplayId=setInterval(()=>{this.advance(),this.startAutoplay()},1e3*r))}clear(){clearInterval(this.autoplayId),this.container.innerHTML=""}};var f=class{constructor(){this.state={},this.container=document.createElement("div"),this.container.className="debugger",document.body.appendChild(this.container),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.container.appendChild(this.canvas),this.render(),window.matchMedia("(min-width: 2000px)").addEventListener("change",()=>this.render())}render(){const t=window.matchMedia("(min-width: 2000px)").matches,e=Number(document.querySelector("[data-actual-width").getAttribute("data-actual-width")),n=Number(document.querySelector("[data-actual-height").getAttribute("data-actual-height"));if(!e||!n)return void this.clear();const o=window.innerWidth/e,a=window.innerHeight/n;if(t){this.canvas.width=o,this.canvas.height=a,this.context.beginPath(),this.context.moveTo(0,a),this.context.lineTo(0,0),this.context.lineTo(o,0),this.context.stroke();for(var i=0;i<4;i++){const t=o/4*i,e=a/4*i,n=2===i?50:25,r=2===i?50:25;this.context.beginPath(),this.context.moveTo(0,e),this.context.lineTo(n,e),this.context.stroke(),this.context.beginPath(),this.context.moveTo(t,0),this.context.lineTo(t,r),this.context.stroke()}var r=this.canvas.toDataURL();this.container.style.backgroundImage="url("+r+")"}else this.clear()}clear(){const t=window.innerWidth,e=window.innerHeight;this.context.clearRect(0,0,t,e);var n=this.canvas.toDataURL();this.container.style.backgroundImage="url("+n+")"}};if(document.querySelector("[data-demo]")){var v=new c,m=(new h({router:v,visible:!0}),new p({router:v}),document.querySelector("[data-demo]").getAttribute("data-demo"));v.load(m)}var y=document.querySelector("[data-debug]");if(y&&"true"===y.getAttribute("data-debug"))new f(y)}]);
//# sourceMappingURL=vast.js.map